<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kristine Joy Paas">
<meta name="dcterms.date" content="2024-04-16">

<title>ISSS608 - Take-home Exercise 1: Singapore Private Residential Property Market for 2024 Q1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ISSS608</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Hands-on Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercises">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Exs/Ex1/Hands-on_Ex1.html" rel="" target="">
 <span class="dropdown-text">1: A Layered Grammar of Graphics: ggplot2 methods</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Exs/Ex2/Hands-on_Ex2.html" rel="" target="">
 <span class="dropdown-text">2: Beyond ggplot Fundamentals</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">In-class Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercises">    
        <li>
    <a class="dropdown-item" href="../../In-class_Exs/Ex1/In-class_Ex1.html" rel="" target="">
 <span class="dropdown-text">1: Introduction to Visual Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Exs/Ex2/In-class_Ex2.html" rel="" target="">
 <span class="dropdown-text">2: Visualizing Distribution</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Take-home Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercises">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Exs/Ex1/Take-home_Ex1.html" rel="" target="">
 <span class="dropdown-text">1: Singapore Private Residential Property Market for 2024 Q1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Exs/Ex2/Take-home_Ex2.html" rel="" target="">
 <span class="dropdown-text">2: DataVis Makeover</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">1 Overview</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">1.1 Background</a></li>
  <li><a href="#loading-the-data-sources" id="toc-loading-the-data-sources" class="nav-link" data-scroll-target="#loading-the-data-sources">1.2 Loading the data sources</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">1.3 Methodology</a></li>
  </ul></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">2 Setup</a>
  <ul class="collapse">
  <li><a href="#loading-the-r-packages" id="toc-loading-the-r-packages" class="nav-link" data-scroll-target="#loading-the-r-packages">2.1 Loading the R packages</a></li>
  <li><a href="#data-checkpoints" id="toc-data-checkpoints" class="nav-link" data-scroll-target="#data-checkpoints">2.2 Data Checkpoints</a></li>
  </ul></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">3 Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#importing-the-datasets" id="toc-importing-the-datasets" class="nav-link" data-scroll-target="#importing-the-datasets">3.1 Importing the datasets</a></li>
  <li><a href="#combining-the-dataframes" id="toc-combining-the-dataframes" class="nav-link" data-scroll-target="#combining-the-dataframes">3.2 Combining the dataframes</a></li>
  <li><a href="#filtering-relevant-columns" id="toc-filtering-relevant-columns" class="nav-link" data-scroll-target="#filtering-relevant-columns">3.3 Filtering relevant columns</a></li>
  <li><a href="#closer-look-at-number_of_units" id="toc-closer-look-at-number_of_units" class="nav-link" data-scroll-target="#closer-look-at-number_of_units">3.4 Closer look at NUMBER_OF_UNITS</a></li>
  <li><a href="#handling-the-bulk-transactions" id="toc-handling-the-bulk-transactions" class="nav-link" data-scroll-target="#handling-the-bulk-transactions">3.5 Handling the bulk transactions</a></li>
  </ul></li>
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration">4 Data Exploration</a>
  <ul class="collapse">
  <li><a href="#defining-the-audience-and-purpose-of-the-visualizations" id="toc-defining-the-audience-and-purpose-of-the-visualizations" class="nav-link" data-scroll-target="#defining-the-audience-and-purpose-of-the-visualizations">4.1 Defining the audience and purpose of the visualizations</a>
  <ul class="collapse">
  <li><a href="#considerations" id="toc-considerations" class="nav-link" data-scroll-target="#considerations">4.1.1 Considerations</a></li>
  <li><a href="#unit-price-vs-transacted-price" id="toc-unit-price-vs-transacted-price" class="nav-link" data-scroll-target="#unit-price-vs-transacted-price">4.1.2 Unit Price vs Transacted Price</a></li>
  <li><a href="#compare-all-quarters-or-two-quarters" id="toc-compare-all-quarters-or-two-quarters" class="nav-link" data-scroll-target="#compare-all-quarters-or-two-quarters">4.1.3 Compare all quarters or two quarters</a></li>
  </ul></li>
  <li><a href="#visualization-1-2023q1-and-2024q1-prices" id="toc-visualization-1-2023q1-and-2024q1-prices" class="nav-link" data-scroll-target="#visualization-1-2023q1-and-2024q1-prices">4.2 Visualization 1: 2023Q1 and 2024Q1 prices</a>
  <ul class="collapse">
  <li><a href="#creating-the-base-visualization" id="toc-creating-the-base-visualization" class="nav-link" data-scroll-target="#creating-the-base-visualization">4.2.1 Creating the base Visualization</a></li>
  <li><a href="#adding-the-change" id="toc-adding-the-change" class="nav-link" data-scroll-target="#adding-the-change">4.2.2 Adding the % change</a></li>
  <li><a href="#generating-the-visualization" id="toc-generating-the-visualization" class="nav-link" data-scroll-target="#generating-the-visualization">4.2.3 Generating the visualization</a></li>
  </ul></li>
  <li><a href="#visualization-2-2023q1-and-2024q1-sales-volume" id="toc-visualization-2-2023q1-and-2024q1-sales-volume" class="nav-link" data-scroll-target="#visualization-2-2023q1-and-2024q1-sales-volume">4.3 Visualization 2: 2023Q1 and 2024Q1 Sales Volume</a>
  <ul class="collapse">
  <li><a href="#understanding-the-groups-in-new-sales-market" id="toc-understanding-the-groups-in-new-sales-market" class="nav-link" data-scroll-target="#understanding-the-groups-in-new-sales-market">4.3.1 Understanding the groups in New Sales Market</a></li>
  <li><a href="#creating-the-base-visualization-1" id="toc-creating-the-base-visualization-1" class="nav-link" data-scroll-target="#creating-the-base-visualization-1">4.3.2. Creating the base visualization</a></li>
  <li><a href="#generating-the-visualization-1" id="toc-generating-the-visualization-1" class="nav-link" data-scroll-target="#generating-the-visualization-1">4.3.3 Generating the visualization</a></li>
  </ul></li>
  <li><a href="#visualization-3-2024-q1-market-by-property-type" id="toc-visualization-3-2024-q1-market-by-property-type" class="nav-link" data-scroll-target="#visualization-3-2024-q1-market-by-property-type">4.4 Visualization 3: 2024 Q1 Market by Property Type</a>
  <ul class="collapse">
  <li><a href="#checking-price-trends-by-property-type" id="toc-checking-price-trends-by-property-type" class="nav-link" data-scroll-target="#checking-price-trends-by-property-type">4.4.1 Checking price trends by property type</a></li>
  <li><a href="#creating-base-visualizations" id="toc-creating-base-visualizations" class="nav-link" data-scroll-target="#creating-base-visualizations">4.4.2 Creating base visualizations</a></li>
  <li><a href="#generating-the-visualization-2" id="toc-generating-the-visualization-2" class="nav-link" data-scroll-target="#generating-the-visualization-2">4.4.3 Generating the visualization</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">5 Summary</a>
  <ul class="collapse">
  <li><a href="#visualizations" id="toc-visualizations" class="nav-link" data-scroll-target="#visualizations">5.1 Visualizations</a>
  <ul class="collapse">
  <li><a href="#singapore-private-property-prices-by-sales-market" id="toc-singapore-private-property-prices-by-sales-market" class="nav-link" data-scroll-target="#singapore-private-property-prices-by-sales-market">5.1.1 Singapore Private Property Prices by Sales Market</a></li>
  <li><a href="#districts-with-highest-units-sold-for-each-submarket" id="toc-districts-with-highest-units-sold-for-each-submarket" class="nav-link" data-scroll-target="#districts-with-highest-units-sold-for-each-submarket">5.1.2 Districts with Highest Units Sold for Each Submarket</a></li>
  <li><a href="#singapore-private-property-sales-by-property-type-for-2024-q1" id="toc-singapore-private-property-sales-by-property-type-for-2024-q1" class="nav-link" data-scroll-target="#singapore-private-property-sales-by-property-type-for-2024-q1">5.1.3 Singapore Private Property Sales by Property Type for 2024 Q1</a></li>
  </ul></li>
  <li><a href="#overall-insights" id="toc-overall-insights" class="nav-link" data-scroll-target="#overall-insights">5.2 Overall Insights</a></li>
  <li><a href="#reflections" id="toc-reflections" class="nav-link" data-scroll-target="#reflections">5.3 Reflections</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">6 References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 1: Singapore Private Residential Property Market for 2024 Q1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kristine Joy Paas </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 16, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">April 26, 2024</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="overview" class="level1">
<h1>1 Overview</h1>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">1.1 Background</h2>
<p>Singapore has one of the highest home ownership rates in the world at 89.7%, <a href="https://tradingeconomics.com/country-list/home-ownership-rate?continent=g20">2nd only to Russia among the G20</a> countries. Due to Singapore’s successful public housing program, <a href="13+ Housing &amp; Household Statistics in Singapore (2024)">77.8% of Singapore residents live in HDB flats</a>, while 22% live in private properties like condos or landed properties.</p>
<p>While the HDB market targets Singaporeans with household income of up to 14,000 SGD, the private housing market is Singapore is still in demand for households looking to upgrade, invest their property, and for residents not eligible for public housing (e.g.&nbsp;high income household, foreigners, etc.)</p>
<p>In this exercise we will look at the market trends for private residential property market for 2024 Q1 and see how the economic factors have affected it.</p>
</section>
<section id="loading-the-data-sources" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data-sources">1.2 Loading the data sources</h2>
<p>For this exercise, we will use the residential real estate transaction data from <a href="https://www.ura.gov.sg/reis/index">REALIS</a>. This provides comprehensive and up-to-date statistics on the private property market in Singapore.</p>
<p>The dataset has been provided via eLearn and added to the <code>data/</code> folder of this exercise.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
File Structure
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><img src="images/file_structure.png" class="img-fluid"></p>
</div>
</div>
</div>
<p>For the purposes of this exercise, we will refer to each data as the following:</p>
<ul>
<li><p><strong>2023Q1</strong>: <code>ResidentialTransaction20240308160536.csv</code></p></li>
<li><p><strong>2023Q2</strong>: <code>ResidentialTransaction20240308160736.csv</code></p></li>
<li><p><strong>2023Q3</strong>: <code>ResidentialTransaction20240308161009.csv</code></p></li>
<li><p><strong>2023Q4</strong>: <code>ResidentialTransaction20240308161109.csv</code></p></li>
<li><p><strong>2024Q1</strong>: <code>ResidentialTransaction20240414220633.csv</code></p></li>
</ul>
</section>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">1.3 Methodology</h2>
<p>To start the data analysis, we first need to prepare the R environment for analysis. This includes loading the R packages and loading the datasets.</p>
<p>After the setup, we need to do <strong>data wrangling</strong> where we clean and transform the data into a form that is fitting for our analysis. This will possible entail removing irrelevant data, deriving additional variables, renaming columns, etc.</p>
<p>As part of wrangling, we need to decide on what data we would like to look at closely. For the purposes of this exercise, these are the data we can look at that can potentially give valuable insights:</p>
<ul>
<li><p>Total units sold by quarter</p></li>
<li><p>Units sold by submarkets such as property type (e.g.&nbsp;condominium, terrace house, apartment, detached house), sale type (e.g.&nbsp;resale, new sale, subsale), etc.</p></li>
<li><p>Transaction price by submarkets such property type (e.g.&nbsp;condominium, terrace house, apartment, detached house, etc), sale type (e.g.&nbsp;resale, new sale, subsale), etc.</p></li>
</ul>
<p>Finally, we will do <strong>data exploration</strong> and <strong>visualize</strong> the insights gained from the data. Some of the questions we would ask are:</p>
<ul>
<li><p>What is the general trend of private residential property sales prices?</p></li>
<li><p>Is this trend consistent among all submarkets?</p></li>
<li><p>How affordable are private residential properties for Singaporean households?</p></li>
</ul>
</section>
</section>
<section id="setup" class="level1">
<h1>2 Setup</h1>
<section id="loading-the-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-r-packages">2.1 Loading the R packages</h2>
<p>For this exercise, we will mainly use the following packages for data analysis:</p>
<ul>
<li><a href="https://www.tidyverse.org/">tidyverse</a>: A collection of R packages used in data science, which includes <a href="https://ggplot2.tidyverse.org/">ggplot2</a>, <a href="https://tibble.tidyverse.org/">tibble</a>, <a href="https://readr.tidyverse.org/">readr</a>, among others</li>
<li><a href="https://mjskay.github.io/ggdist/">ggdist</a>: Provides functions for presenting distributions in <code>ggplot2</code>. <code>stat_halfeye()</code> and <code>stat_dots()</code> will be used the most.</li>
<li><a href="https://wilkelab.org/ggtext/">ggtext</a>: Enhances text rendering for <code>ggplot2</code>. <code>element_markdown()</code> is most notable function used for markdown rendering so we can highlight important information in text.</li>
<li><a href="https://ggrepel.slowkow.com/">ggrepel</a>: Manages overlapping texts and labels on <code>ggplot2</code>. We will use this to render labels on dense plots.</li>
<li><a href="https://patchwork.data-imaginist.com/">patchwork</a>: Allows composition of multiple graphs into a single plot</li>
</ul>
<p>Aside from these, we will also include other packages that will help us present the data better.</p>
<ul>
<li><a href="https://www.rdocumentation.org/packages/knitr/versions/1.45">knitr</a>: Provides tools for dynamic report generation in R. For this exercise, we will use this package to render our tables better.</li>
<li><a href="https://scales.r-lib.org/">scales</a>: Extends functions to operate on <code>ggplot2</code> scales. For this exercise, we will use <code>wrap_format()</code> to wrap long texts.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(knitr,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               tidyverse,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               patchwork,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               ggdist,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>               ggtext,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>               ggrepel,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>               scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-checkpoints" class="level2">
<h2 class="anchored" data-anchor-id="data-checkpoints">2.2 Data Checkpoints</h2>
<p>As the analysis is expected to have a lot of intermediate steps, <strong>Save</strong>, <strong>Load</strong>, and <strong>Data clear</strong> points are available to make our data wrangling more efficient.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Save point
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is where data is written as <code>rds</code> files using <code>write_rds()</code> for important data sets that will be used in later analysis. Examples are:</p>
<ul>
<li>Data we need to prepare for analysis</li>
<li>Critical outputs of expensive calculations</li>
<li>Cleaned up data for lightweight processing</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Load point
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is where data is loaded from <code>rds</code> files using <code>read_rds()</code>. They were previously generated by the save point.</p>
<p><strong>TIP</strong>: Skip to the load points to progress without running the code above it</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data clear point
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is where data that will not be used anymore are cleared. The data in RStudio environment will pile up and will make it more difficult to check the relevant data in each part.</p>
<p>We can set <code>#| eval: false</code> in code chunks if we want skip the clearing. For example, the code below won’t be run.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>message <span class="ot">&lt;-</span> <span class="st">"This code chunk executed"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>To use these checkpoints, we need to create <code>data/rds</code> folder.</p>
</section>
</section>
<section id="data-wrangling" class="level1">
<h1>3 Data Wrangling</h1>
<section id="importing-the-datasets" class="level2">
<h2 class="anchored" data-anchor-id="importing-the-datasets">3.1 Importing the datasets</h2>
<p>Upon inspection of the csv files, column names have human-readable titles such as “Project Name”, “Transacted Price ($)”, etc. While good for humans, these column names may cause parsing issues with R, especially as there are special characters.</p>
<p>Because of this, we will rename the columns in their UPPER_CASE format after removing the special characters. We will create a helper function that will help us accomplish this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>rename_realis_column <span class="ot">&lt;-</span> <span class="cf">function</span>(orig_name) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add underscores to spaces</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">" +"</span>, <span class="st">"_"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>       <span class="co"># Remove special characters</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">gsub</span>(<span class="st">"[^A-Z ]"</span>, <span class="st">""</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Convert to upper case and remove trailing spaces</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">toupper</span>(orig_name)) <span class="sc">%&gt;%</span> <span class="fu">trimws</span>())</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will use <code>read_csv()</code> to import each file and use <code>rename_realis_column()</code> in the <code>rename_with()</code> function.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">2023 Q1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">2023 Q2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">2023 Q3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">2023 Q4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">2024 Q1</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>realis_2023q1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/ResidentialTransaction20240308160536.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_with</span>(rename_realis_column)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(realis_2023q1, <span class="at">n=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">SALE_DATE</th>
<th style="text-align: left;">ADDRESS</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: right;">AREA_SQM</th>
<th style="text-align: right;">UNIT_PRICE_PSM</th>
<th style="text-align: left;">NETT_PRICE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">TENURE</th>
<th style="text-align: left;">COMPLETION_DATE</th>
<th style="text-align: left;">PURCHASER_ADDRESS_INDICATOR</th>
<th style="text-align: left;">POSTAL_CODE</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">POSTAL_SECTOR</th>
<th style="text-align: left;">PLANNING_REGION</th>
<th style="text-align: left;">PLANNING_AREA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">THE REEF AT KING’S DOCK</td>
<td style="text-align: right;">2317000</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2625</td>
<td style="text-align: left;">01 Jan 2023</td>
<td style="text-align: left;">12 HARBOURFRONT AVENUE #05-32</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">28256</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 12/01/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">097996</td>
<td style="text-align: left;">04</td>
<td style="text-align: left;">09</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Merah</td>
</tr>
<tr class="even">
<td style="text-align: left;">URBAN TREASURES</td>
<td style="text-align: right;">1823500</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2066</td>
<td style="text-align: left;">02 Jan 2023</td>
<td style="text-align: left;">205 JALAN EUNOS #08-02</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">22238</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">419535</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">41</td>
<td style="text-align: left;">East Region</td>
<td style="text-align: left;">Bedok</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1421112</td>
<td style="text-align: right;">1076.40</td>
<td style="text-align: right;">1320</td>
<td style="text-align: left;">02 Jan 2023</td>
<td style="text-align: left;">29 YISHUN CLOSE #08-10</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: right;">14211</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">269343</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1258112</td>
<td style="text-align: right;">1033.34</td>
<td style="text-align: right;">1218</td>
<td style="text-align: left;">02 Jan 2023</td>
<td style="text-align: left;">45 YISHUN CLOSE #07-42</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: right;">13105</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">269294</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PARC BOTANNIA</td>
<td style="text-align: right;">1280000</td>
<td style="text-align: right;">871.88</td>
<td style="text-align: right;">1468</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">12 FERNVALE STREET #06-16</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">81.0</td>
<td style="text-align: right;">15802</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 28/12/2016</td>
<td style="text-align: left;">2022</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">797391</td>
<td style="text-align: left;">28</td>
<td style="text-align: left;">79</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Sengkang</td>
</tr>
<tr class="even">
<td style="text-align: left;">NANYANG PARK</td>
<td style="text-align: right;">5870000</td>
<td style="text-align: right;">3322.85</td>
<td style="text-align: right;">1767</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">72 JALAN LIMBOK</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: right;">308.7</td>
<td style="text-align: right;">19015</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">999 yrs from 14/02/1881</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">548742</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">54</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Hougang</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PALMS @ SIXTH AVENUE</td>
<td style="text-align: right;">4950000</td>
<td style="text-align: right;">4520.88</td>
<td style="text-align: right;">1095</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">231 SIXTH AVENUE</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">420.0</td>
<td style="text-align: right;">11786</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">2015</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">275780</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are <strong>4,722</strong> private residential propertysales for 2023 Q1.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>realis_2023q2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/ResidentialTransaction20240308160736.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_with</span>(rename_realis_column)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(realis_2023q2, <span class="at">n=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">SALE_DATE</th>
<th style="text-align: left;">ADDRESS</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: right;">AREA_SQM</th>
<th style="text-align: right;">UNIT_PRICE_PSM</th>
<th style="text-align: left;">NETT_PRICE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">TENURE</th>
<th style="text-align: left;">COMPLETION_DATE</th>
<th style="text-align: left;">PURCHASER_ADDRESS_INDICATOR</th>
<th style="text-align: left;">POSTAL_CODE</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">POSTAL_SECTOR</th>
<th style="text-align: left;">PLANNING_REGION</th>
<th style="text-align: left;">PLANNING_AREA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">THE GAZANIA</td>
<td style="text-align: right;">1528000</td>
<td style="text-align: right;">678.13</td>
<td style="text-align: right;">2253</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">15 HOW SUN DRIVE #02-31</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">63</td>
<td style="text-align: right;">24254</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">2022</td>
<td style="text-align: left;">N.A</td>
<td style="text-align: left;">538545</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">53</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Serangoon</td>
</tr>
<tr class="even">
<td style="text-align: left;">THE GAZANIA</td>
<td style="text-align: right;">1938000</td>
<td style="text-align: right;">958.00</td>
<td style="text-align: right;">2023</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">7 HOW SUN DRIVE #01-12</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">21775</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">2022</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">538530</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">53</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Serangoon</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ONE PEARL BANK</td>
<td style="text-align: right;">2051000</td>
<td style="text-align: right;">699.66</td>
<td style="text-align: right;">2931</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">1 PEARL BANK #32-16</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">31554</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 01/03/2019</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">169016</td>
<td style="text-align: left;">03</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Outram</td>
</tr>
<tr class="even">
<td style="text-align: left;">URBAN TREASURES</td>
<td style="text-align: right;">1850700</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2097</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">205 JALAN EUNOS #05-05</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">22570</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">419535</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">41</td>
<td style="text-align: left;">East Region</td>
<td style="text-align: left;">Bedok</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HYLL ON HOLLAND</td>
<td style="text-align: right;">2021500</td>
<td style="text-align: right;">699.66</td>
<td style="text-align: right;">2889</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">97 HOLLAND ROAD #10-25</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">31100</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">278541</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
</tr>
<tr class="even">
<td style="text-align: left;">LEEDON GREEN</td>
<td style="text-align: right;">1838000</td>
<td style="text-align: right;">785.77</td>
<td style="text-align: right;">2339</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">34 LEEDON HEIGHTS #12-40</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">25178</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">266076</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
</tr>
<tr class="odd">
<td style="text-align: left;">KLIMT CAIRNHILL</td>
<td style="text-align: right;">7320000</td>
<td style="text-align: right;">2055.92</td>
<td style="text-align: right;">3560</td>
<td style="text-align: left;">01 Apr 2023</td>
<td style="text-align: left;">71 CAIRNHILL ROAD #15-01</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">191</td>
<td style="text-align: right;">38325</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">229725</td>
<td style="text-align: left;">09</td>
<td style="text-align: left;">22</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Newton</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are <strong>6,125</strong> private residential property sales for 2023 Q2.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>realis_2023q3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/ResidentialTransaction20240308161009.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_with</span>(rename_realis_column)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(realis_2023q3, <span class="at">n=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 9%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">SALE_DATE</th>
<th style="text-align: left;">ADDRESS</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: right;">AREA_SQM</th>
<th style="text-align: right;">UNIT_PRICE_PSM</th>
<th style="text-align: left;">NETT_PRICE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">TENURE</th>
<th style="text-align: left;">COMPLETION_DATE</th>
<th style="text-align: left;">PURCHASER_ADDRESS_INDICATOR</th>
<th style="text-align: left;">POSTAL_CODE</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">POSTAL_SECTOR</th>
<th style="text-align: left;">PLANNING_REGION</th>
<th style="text-align: left;">PLANNING_AREA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MYRA</td>
<td style="text-align: right;">1658000</td>
<td style="text-align: right;">667.37</td>
<td style="text-align: right;">2484</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">9 MEYAPPA CHETTIAR ROAD #02-07</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">26742</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">N.A</td>
<td style="text-align: left;">358456</td>
<td style="text-align: left;">13</td>
<td style="text-align: left;">35</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Toa Payoh</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1449000</td>
<td style="text-align: right;">1076.40</td>
<td style="text-align: right;">1346</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">27 YISHUN CLOSE #10-06</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">14490</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">769342</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">76</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1365000</td>
<td style="text-align: right;">1076.40</td>
<td style="text-align: right;">1268</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">27 YISHUN CLOSE #05-06</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">13650</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">769342</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">76</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1231000</td>
<td style="text-align: right;">958.00</td>
<td style="text-align: right;">1285</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">35 YISHUN CLOSE #08-25</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">13831</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">769299</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">76</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1272000</td>
<td style="text-align: right;">1001.05</td>
<td style="text-align: right;">1271</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">45 YISHUN CLOSE #09-45</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">13677</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">769294</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">76</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
</tr>
<tr class="even">
<td style="text-align: left;">PICCADILLY GRAND</td>
<td style="text-align: right;">3462000</td>
<td style="text-align: right;">1679.18</td>
<td style="text-align: right;">2062</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">3 NORTHUMBERLAND ROAD #14-09</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">156</td>
<td style="text-align: right;">22192</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 02/08/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">219569</td>
<td style="text-align: left;">08</td>
<td style="text-align: left;">21</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Kallang</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TENET</td>
<td style="text-align: right;">1356000</td>
<td style="text-align: right;">925.70</td>
<td style="text-align: right;">1465</td>
<td style="text-align: left;">01 Jul 2023</td>
<td style="text-align: left;">71 TAMPINES STREET 62 #14-02</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">15767</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 01/11/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">529699</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">52</td>
<td style="text-align: left;">East Region</td>
<td style="text-align: left;">Tampines</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are <strong>6,206</strong> private residential property sales for 2023 Q3.</p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>realis_2023q4 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/ResidentialTransaction20240308161109.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_with</span>(rename_realis_column)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(realis_2023q4, <span class="at">n=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">SALE_DATE</th>
<th style="text-align: left;">ADDRESS</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: right;">AREA_SQM</th>
<th style="text-align: right;">UNIT_PRICE_PSM</th>
<th style="text-align: left;">NETT_PRICE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">TENURE</th>
<th style="text-align: left;">COMPLETION_DATE</th>
<th style="text-align: left;">PURCHASER_ADDRESS_INDICATOR</th>
<th style="text-align: left;">POSTAL_CODE</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">POSTAL_SECTOR</th>
<th style="text-align: left;">PLANNING_REGION</th>
<th style="text-align: left;">PLANNING_AREA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">LEEDON GREEN</td>
<td style="text-align: right;">1749000</td>
<td style="text-align: right;">538.20</td>
<td style="text-align: right;">3250</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">26 LEEDON HEIGHTS #11-08</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">34980</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">266221</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
</tr>
<tr class="even">
<td style="text-align: left;">LIV @ MB</td>
<td style="text-align: right;">3148740</td>
<td style="text-align: right;">1453.14</td>
<td style="text-align: right;">2167</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">114A ARTHUR ROAD #01-01</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">23324</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 23/11/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">439826</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">43</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Marine Parade</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MORI</td>
<td style="text-align: right;">2422337</td>
<td style="text-align: right;">1259.39</td>
<td style="text-align: right;">1923</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">223 GUILLEMARD ROAD #05-21</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">20704</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">399738</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">39</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Geylang</td>
</tr>
<tr class="even">
<td style="text-align: left;">THE ARDEN</td>
<td style="text-align: right;">1330000</td>
<td style="text-align: right;">721.19</td>
<td style="text-align: right;">1844</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">6 PHOENIX ROAD #01-18</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">19851</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 14/07/2023</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">668159</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">66</td>
<td style="text-align: left;">West Region</td>
<td style="text-align: left;">Bukit Batok</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LENTOR MODERN</td>
<td style="text-align: right;">2237000</td>
<td style="text-align: right;">1130.22</td>
<td style="text-align: right;">1979</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">3 LENTOR CENTRAL #05-03</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">21305</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 26/10/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">788888</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">78</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Ang Mo Kio</td>
</tr>
<tr class="even">
<td style="text-align: left;">THE LAKEGARDEN RESIDENCES</td>
<td style="text-align: right;">1249900</td>
<td style="text-align: right;">592.02</td>
<td style="text-align: right;">2111</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">82 YUAN CHING ROAD #04-14</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">22725</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 31/05/2023</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">619614</td>
<td style="text-align: left;">22</td>
<td style="text-align: left;">61</td>
<td style="text-align: left;">West Region</td>
<td style="text-align: left;">Jurong East</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LENTOR HILLS RESIDENCES</td>
<td style="text-align: right;">2890000</td>
<td style="text-align: right;">1356.26</td>
<td style="text-align: right;">2131</td>
<td style="text-align: left;">01 Oct 2023</td>
<td style="text-align: left;">31 LENTOR HILLS ROAD #15-03</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">22937</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 25/04/2022</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">788881</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">78</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Ang Mo Kio</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are <strong>4,851</strong> private residential property sales for 2023 Q4.</p>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>realis_2024q1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/ResidentialTransaction20240414220633.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">rename_with</span>(rename_realis_column)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(realis_2024q1, <span class="at">n=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">SALE_DATE</th>
<th style="text-align: left;">ADDRESS</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: right;">AREA_SQM</th>
<th style="text-align: right;">UNIT_PRICE_PSM</th>
<th style="text-align: left;">NETT_PRICE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">TENURE</th>
<th style="text-align: left;">COMPLETION_DATE</th>
<th style="text-align: left;">PURCHASER_ADDRESS_INDICATOR</th>
<th style="text-align: left;">POSTAL_CODE</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">POSTAL_SECTOR</th>
<th style="text-align: left;">PLANNING_REGION</th>
<th style="text-align: left;">PLANNING_AREA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">THE LANDMARK</td>
<td style="text-align: right;">2726888</td>
<td style="text-align: right;">1076.40</td>
<td style="text-align: right;">2533</td>
<td style="text-align: left;">01 Jan 2024</td>
<td style="text-align: left;">173 CHIN SWEE ROAD #22-11</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">27269</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 28/08/2020</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">169878</td>
<td style="text-align: left;">03</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Outram</td>
</tr>
<tr class="even">
<td style="text-align: left;">POLLEN COLLECTION</td>
<td style="text-align: right;">3850000</td>
<td style="text-align: right;">1808.35</td>
<td style="text-align: right;">2129</td>
<td style="text-align: left;">01 Jan 2024</td>
<td style="text-align: left;">34 POLLEN PLACE</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">22917</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 09/12/2019</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">N.A</td>
<td style="text-align: left;">807233</td>
<td style="text-align: left;">28</td>
<td style="text-align: left;">80</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Serangoon</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SKY EDEN@BEDOK</td>
<td style="text-align: right;">2346000</td>
<td style="text-align: right;">1087.16</td>
<td style="text-align: right;">2158</td>
<td style="text-align: left;">01 Jan 2024</td>
<td style="text-align: left;">1 BEDOK CENTRAL #09-10</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">101</td>
<td style="text-align: right;">23228</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 05/01/2022</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">469657</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">46</td>
<td style="text-align: left;">East Region</td>
<td style="text-align: left;">Bedok</td>
</tr>
<tr class="even">
<td style="text-align: left;">TERRA HILL</td>
<td style="text-align: right;">2190000</td>
<td style="text-align: right;">807.30</td>
<td style="text-align: right;">2713</td>
<td style="text-align: left;">01 Jan 2024</td>
<td style="text-align: left;">18A YEW SIANG ROAD #03-12</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">29200</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">N.A</td>
<td style="text-align: left;">118992</td>
<td style="text-align: left;">05</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Queenstown</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PINETREE HILL</td>
<td style="text-align: right;">1954000</td>
<td style="text-align: right;">796.54</td>
<td style="text-align: right;">2453</td>
<td style="text-align: left;">01 Jan 2024</td>
<td style="text-align: left;">36 PINE GROVE #05-18</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">74</td>
<td style="text-align: right;">26405</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 12/09/2022</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">598444</td>
<td style="text-align: left;">21</td>
<td style="text-align: left;">59</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
</tr>
<tr class="even">
<td style="text-align: left;">THE RESERVE RESIDENCES</td>
<td style="text-align: right;">3412201</td>
<td style="text-align: right;">1323.97</td>
<td style="text-align: right;">2577</td>
<td style="text-align: left;">01 Jan 2024</td>
<td style="text-align: left;">13 JALAN ANAK BUKIT #28-106</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">27741</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 29/11/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">589605</td>
<td style="text-align: left;">21</td>
<td style="text-align: left;">58</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SUMMER VILLAS</td>
<td style="text-align: right;">2960000</td>
<td style="text-align: right;">3530.59</td>
<td style="text-align: right;">838</td>
<td style="text-align: left;">02 Jan 2024</td>
<td style="text-align: left;">73 GERALD DRIVE #01-06</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">328</td>
<td style="text-align: right;">9024</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">2004</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">797703</td>
<td style="text-align: left;">28</td>
<td style="text-align: left;">79</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Hougang</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>There are <strong>4,902</strong> private residential property sales for 2024 Q1.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(realis_2023q1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4,722
Columns: 21
$ PROJECT_NAME                &lt;chr&gt; "THE REEF AT KING'S DOCK", "URBAN TREASURE…
$ TRANSACTED_PRICE            &lt;dbl&gt; 2317000, 1823500, 1421112, 1258112, 128000…
$ AREA_SQFT                   &lt;dbl&gt; 882.65, 882.65, 1076.40, 1033.34, 871.88, …
$ UNIT_PRICE_PSF              &lt;dbl&gt; 2625, 2066, 1320, 1218, 1468, 1767, 1095, …
$ SALE_DATE                   &lt;chr&gt; "01 Jan 2023", "02 Jan 2023", "02 Jan 2023…
$ ADDRESS                     &lt;chr&gt; "12 HARBOURFRONT AVENUE #05-32", "205 JALA…
$ TYPE_OF_SALE                &lt;chr&gt; "New Sale", "New Sale", "New Sale", "New S…
$ TYPE_OF_AREA                &lt;chr&gt; "Strata", "Strata", "Strata", "Strata", "S…
$ AREA_SQM                    &lt;dbl&gt; 82.0, 82.0, 100.0, 96.0, 81.0, 308.7, 420.…
$ UNIT_PRICE_PSM              &lt;dbl&gt; 28256, 22238, 14211, 13105, 15802, 19015, …
$ NETT_PRICE                  &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", "-", "-…
$ PROPERTY_TYPE               &lt;chr&gt; "Condominium", "Condominium", "Executive C…
$ NUMBER_OF_UNITS             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ TENURE                      &lt;chr&gt; "99 yrs from 12/01/2021", "Freehold", "99 …
$ COMPLETION_DATE             &lt;chr&gt; "Uncompleted", "Uncompleted", "Uncompleted…
$ PURCHASER_ADDRESS_INDICATOR &lt;chr&gt; "HDB", "Private", "HDB", "HDB", "HDB", "Pr…
$ POSTAL_CODE                 &lt;chr&gt; "097996", "419535", "269343", "269294", "7…
$ POSTAL_DISTRICT             &lt;chr&gt; "04", "14", "27", "27", "28", "19", "10", …
$ POSTAL_SECTOR               &lt;chr&gt; "09", "41", "26", "26", "79", "54", "27", …
$ PLANNING_REGION             &lt;chr&gt; "Central Region", "East Region", "North Re…
$ PLANNING_AREA               &lt;chr&gt; "Bukit Merah", "Bedok", "Yishun", "Yishun"…</code></pre>
</div>
</div>
<p>The imported dataset has 21 variables.</p>
</section>
<section id="combining-the-dataframes" class="level2">
<h2 class="anchored" data-anchor-id="combining-the-dataframes">3.2 Combining the dataframes</h2>
<p>Next, we will combine all 5 <code>realis_202*q*</code> dataframes into a single one to simplify aggregation and partitioning of data for analysis.</p>
<p>This will also simplify cleanup and transformation as they will be done on a single dataframe instead of 5.</p>
<p>To do this, we need to add <code>QUARTER</code> values to each dataframe before merging them to a single one. We will use the format <code>&lt;YEAR&gt;Q&lt;QUARTER&gt;</code>, i.e <code>2024Q1</code> for 2024 Q1. This is so we can identify which quarter the sale was made, which we will use for aggregation.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Functions used
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><code>mutate()</code> for adding new column</p></li>
<li><p><code>rbind()</code> for combining all dataframes</p></li>
<li><p><code>seq_len()</code> and <code>nrow()</code> for generating a sequence of IDs</p></li>
<li><p><code>sprintf()</code> for formatting a string.</p></li>
</ul>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Adding QUARTER column</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Combining data frames</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Adding transaction ID’s (TXN_ID)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Verifying the result</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>realis_2023q1 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(realis_2023q1, <span class="at">QUARTER=</span><span class="st">"2023Q1"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>realis_2023q2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(realis_2023q2, <span class="at">QUARTER=</span><span class="st">"2023Q2"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>realis_2023q3 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(realis_2023q3, <span class="at">QUARTER=</span><span class="st">"2023Q3"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>realis_2023q4 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(realis_2023q4, <span class="at">QUARTER=</span><span class="st">"2023Q4"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>realis_2024q1 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(realis_2024q1, <span class="at">QUARTER=</span><span class="st">"2024Q1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>realis <span class="ot">&lt;-</span> realis_2023q1 <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(realis_2023q2) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(realis_2023q3) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(realis_2023q4) <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(realis_2024q1)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(realis, <span class="at">n=</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">SALE_DATE</th>
<th style="text-align: left;">ADDRESS</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: right;">AREA_SQM</th>
<th style="text-align: right;">UNIT_PRICE_PSM</th>
<th style="text-align: left;">NETT_PRICE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">TENURE</th>
<th style="text-align: left;">COMPLETION_DATE</th>
<th style="text-align: left;">PURCHASER_ADDRESS_INDICATOR</th>
<th style="text-align: left;">POSTAL_CODE</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">POSTAL_SECTOR</th>
<th style="text-align: left;">PLANNING_REGION</th>
<th style="text-align: left;">PLANNING_AREA</th>
<th style="text-align: left;">QUARTER</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">THE REEF AT KING’S DOCK</td>
<td style="text-align: right;">2317000</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2625</td>
<td style="text-align: left;">01 Jan 2023</td>
<td style="text-align: left;">12 HARBOURFRONT AVENUE #05-32</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">28256</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 12/01/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">097996</td>
<td style="text-align: left;">04</td>
<td style="text-align: left;">09</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Merah</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="even">
<td style="text-align: left;">URBAN TREASURES</td>
<td style="text-align: right;">1823500</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2066</td>
<td style="text-align: left;">02 Jan 2023</td>
<td style="text-align: left;">205 JALAN EUNOS #08-02</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">22238</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">419535</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">41</td>
<td style="text-align: left;">East Region</td>
<td style="text-align: left;">Bedok</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1421112</td>
<td style="text-align: right;">1076.40</td>
<td style="text-align: right;">1320</td>
<td style="text-align: left;">02 Jan 2023</td>
<td style="text-align: left;">29 YISHUN CLOSE #08-10</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: right;">14211</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">269343</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1258112</td>
<td style="text-align: right;">1033.34</td>
<td style="text-align: right;">1218</td>
<td style="text-align: left;">02 Jan 2023</td>
<td style="text-align: left;">45 YISHUN CLOSE #07-42</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: right;">13105</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 15/02/2021</td>
<td style="text-align: left;">Uncompleted</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">269294</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Yishun</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PARC BOTANNIA</td>
<td style="text-align: right;">1280000</td>
<td style="text-align: right;">871.88</td>
<td style="text-align: right;">1468</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">12 FERNVALE STREET #06-16</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">81.0</td>
<td style="text-align: right;">15802</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 28/12/2016</td>
<td style="text-align: left;">2022</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">797391</td>
<td style="text-align: left;">28</td>
<td style="text-align: left;">79</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Sengkang</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="even">
<td style="text-align: left;">NANYANG PARK</td>
<td style="text-align: right;">5870000</td>
<td style="text-align: right;">3322.85</td>
<td style="text-align: right;">1767</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">72 JALAN LIMBOK</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: right;">308.7</td>
<td style="text-align: right;">19015</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">999 yrs from 14/02/1881</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">548742</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">54</td>
<td style="text-align: left;">North East Region</td>
<td style="text-align: left;">Hougang</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PALMS @ SIXTH AVENUE</td>
<td style="text-align: right;">4950000</td>
<td style="text-align: right;">4520.88</td>
<td style="text-align: right;">1095</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">231 SIXTH AVENUE</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">420.0</td>
<td style="text-align: right;">11786</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">2015</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">275780</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Bukit Timah</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="even">
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">3260000</td>
<td style="text-align: right;">1555.40</td>
<td style="text-align: right;">2096</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">19 TENG TONG ROAD</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: right;">144.5</td>
<td style="text-align: right;">22561</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">1941</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">423510</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">42</td>
<td style="text-align: left;">Central Region</td>
<td style="text-align: left;">Marine Parade</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WHISTLER GRAND</td>
<td style="text-align: right;">850000</td>
<td style="text-align: right;">441.32</td>
<td style="text-align: right;">1926</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">107 WEST COAST VALE #30-04</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">41.0</td>
<td style="text-align: right;">20732</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 07/05/2018</td>
<td style="text-align: left;">2022</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">126751</td>
<td style="text-align: left;">05</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">West Region</td>
<td style="text-align: left;">Clementi</td>
<td style="text-align: left;">2023Q1</td>
</tr>
<tr class="even">
<td style="text-align: left;">NORTHOAKS</td>
<td style="text-align: right;">1268000</td>
<td style="text-align: right;">1603.84</td>
<td style="text-align: right;">791</td>
<td style="text-align: left;">03 Jan 2023</td>
<td style="text-align: left;">30 WOODLANDS CRESCENT #01-11</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: right;">149.0</td>
<td style="text-align: right;">8510</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">99 yrs from 16/12/1997</td>
<td style="text-align: left;">2000</td>
<td style="text-align: left;">HDB</td>
<td style="text-align: left;">738086</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">73</td>
<td style="text-align: left;">North Region</td>
<td style="text-align: left;">Woodlands</td>
<td style="text-align: left;">2023Q1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>We will also add <code>TXN_ID</code> so we can more easily refer to the observations later on. The format is <code>TXN00000</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>realis<span class="sc">$</span>TXN_ID <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"TXN%05d"</span>, <span class="fu">seq_len</span>(<span class="fu">nrow</span>(realis)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<p>Let us check if all rows are accounted for by checking if the number of rows in <code>realis</code> is the total number of rows from all dataframes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(realis) <span class="sc">==</span> <span class="fu">nrow</span>(realis_2023q1) <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>(realis_2023q2) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>(realis_2023q3) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>(realis_2023q4) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>(realis_2024q1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="filtering-relevant-columns" class="level2">
<h2 class="anchored" data-anchor-id="filtering-relevant-columns">3.3 Filtering relevant columns</h2>
<p>After adding the <code>QUARTER</code> and <code>TXN_ID</code> columns, there are now 23 variables in the dataframe. However, not all of them are relevant to answer the questions we are asking. The table below summarizes the columns and whether we will keep them or not.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Columns Retained</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Columns Dropped</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Filter code</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 33%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th>Column Name</th>
<th>Description</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TXN_ID</td>
<td>Identifier for the transaction</td>
<td>It is an identifier</td>
</tr>
<tr class="even">
<td>QUARTER</td>
<td>Quarter when the property was sold</td>
<td>Core data for aggregation</td>
</tr>
<tr class="odd">
<td>PROJECT_NAME</td>
<td>Name of the project</td>
<td>Can be used to pinpoint popular projects</td>
</tr>
<tr class="even">
<td>TRANSACTED_PRICE</td>
<td>Transaction price (SGD)</td>
<td>Useful for deriving insights</td>
</tr>
<tr class="odd">
<td>AREA_SQFT</td>
<td>Area of the property in sqft</td>
<td>Useful for deriving insights</td>
</tr>
<tr class="even">
<td>UNIT_PRICE_PSF</td>
<td>Price per sqft</td>
<td>Useful for price analysis</td>
</tr>
<tr class="odd">
<td>TYPE_OF_SALE</td>
<td>One of <em>New Sale</em>, <em>Resale</em>, <em>Subsale</em></td>
<td>Important submarket information</td>
</tr>
<tr class="even">
<td>TYPE_OF_AREA</td>
<td>One of <em>Landed</em>, <em>Strata</em></td>
<td>Can be used to partition data</td>
</tr>
<tr class="odd">
<td>PROPERTY_TYPE</td>
<td>Type of Property, e.g.&nbsp;<em>Apartment, Condominium, Executive Condominium, Terrace House, Semi-Detached House, Detached House</em></td>
<td>Can be used to partition data</td>
</tr>
<tr class="even">
<td>NUMBER_OF_UNITS</td>
<td>Number of units involved in the transaction</td>
<td>Core data for analysis</td>
</tr>
<tr class="odd">
<td>POSTAL_DISTRICT</td>
<td>District where the property is located</td>
<td>Can be used to partition data</td>
</tr>
<tr class="even">
<td>TENURE</td>
<td>Can be Freehold or Leasehold</td>
<td>Can be used to partition data</td>
</tr>
</tbody>
</table>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<table class="table">
<thead>
<tr class="header">
<th>Column Name</th>
<th>Description</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SALE_DATE</td>
<td>Date when the sale was made</td>
<td>We will aggregate <strong>by quarter</strong>, no need to know the specific dates.</td>
</tr>
<tr class="even">
<td>ADDRESS</td>
<td>Property Address</td>
<td>Will use <code>PROJECT_NAME</code> if needed to pinpoint projects</td>
</tr>
<tr class="odd">
<td>AREA_SQM</td>
<td>Price per sqm</td>
<td><code>AREA_SFT</code> is adequate</td>
</tr>
<tr class="even">
<td>UNIT_PRICE_PSM</td>
<td>Price per sqm</td>
<td><code>UNIT_PRICE_PSF</code> is adequate</td>
</tr>
<tr class="odd">
<td>NETT_PRICE</td>
<td></td>
<td>Column is blank</td>
</tr>
<tr class="even">
<td>COMPLETION_DATE</td>
<td>When the property was completed. Some properties are Uncompleted as they will be turned over for the future</td>
<td>Other attributes (e.g.&nbsp;<code>TYPE_OF_SALE</code>, <code>PROPERTY_TYPE</code>) are more important for checking submarket trends</td>
</tr>
<tr class="odd">
<td>PURCHASER_ADDRESS_INDICATOR</td>
<td><a href="https://www.ura.gov.sg/reis/dataDictionary#:~:text=Purchaser%20Address%20Indicator%3A%20It%20refers,is%20owned%20by%20the%20purchaser.">Type of residence of the purchaser</a></td>
<td>No interest in buyer’s current address</td>
</tr>
<tr class="even">
<td>POSTAL_CODE</td>
<td>Postal code of the property</td>
<td>Will use <code>POSTAL_DISTRICT</code> for location</td>
</tr>
<tr class="odd">
<td>POSTAL_SECTOR</td>
<td>Sector where the property is located</td>
<td>Will use <code>POSTAL_DISTRICT</code> for location</td>
</tr>
<tr class="even">
<td>PLANNING_REGION</td>
<td>Region where the property is located</td>
<td>Will use <code>POSTAL_DISTRICT</code> for location</td>
</tr>
<tr class="odd">
<td>PLANNING_AREA</td>
<td>Area where the property is located</td>
<td>Will use <code>POSTAL_DISTRICT</code> for location</td>
</tr>
</tbody>
</table>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>We will now use <code>select()</code> to keep only the relevant columns. We will define the function below for filtering the relevant columns. This will also rearrange the columns based on the order in the function call.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>realis <span class="ot">&lt;-</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  realis <span class="sc">%&gt;%</span> <span class="fu">select</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>      TXN_ID,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      QUARTER,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>      PROJECT_NAME,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      TRANSACTED_PRICE,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      AREA_SQFT,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>      UNIT_PRICE_PSF,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>      TYPE_OF_SALE,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>      TYPE_OF_AREA,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      PROPERTY_TYPE,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>      NUMBER_OF_UNITS,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      POSTAL_DISTRICT,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>      TENURE</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(realis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 26,806
Columns: 12
$ TXN_ID           &lt;chr&gt; "TXN00001", "TXN00002", "TXN00003", "TXN00004", "TXN0…
$ QUARTER          &lt;chr&gt; "2023Q1", "2023Q1", "2023Q1", "2023Q1", "2023Q1", "20…
$ PROJECT_NAME     &lt;chr&gt; "THE REEF AT KING'S DOCK", "URBAN TREASURES", "NORTH …
$ TRANSACTED_PRICE &lt;dbl&gt; 2317000, 1823500, 1421112, 1258112, 1280000, 5870000,…
$ AREA_SQFT        &lt;dbl&gt; 882.65, 882.65, 1076.40, 1033.34, 871.88, 3322.85, 45…
$ UNIT_PRICE_PSF   &lt;dbl&gt; 2625, 2066, 1320, 1218, 1468, 1767, 1095, 2096, 1926,…
$ TYPE_OF_SALE     &lt;chr&gt; "New Sale", "New Sale", "New Sale", "New Sale", "Resa…
$ TYPE_OF_AREA     &lt;chr&gt; "Strata", "Strata", "Strata", "Strata", "Strata", "La…
$ PROPERTY_TYPE    &lt;chr&gt; "Condominium", "Condominium", "Executive Condominium"…
$ NUMBER_OF_UNITS  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ POSTAL_DISTRICT  &lt;chr&gt; "04", "14", "27", "27", "28", "19", "10", "15", "05",…
$ TENURE           &lt;chr&gt; "99 yrs from 12/01/2021", "Freehold", "99 yrs from 15…</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>After this initial cleanup, we are left with <strong>12</strong> variables relevant to our exploration.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Save point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Let us save <code>realis</code> so we do not need to rerun the steps above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(realis, <span class="st">"data/rds/realis_cleaned.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data clear point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We do not need the <code>realis_202*q*</code> dataframes anymore so we can remove them from the RStudio environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(realis_2023q1)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(realis_2023q2)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(realis_2023q3)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(realis_2023q4)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(realis_2024q1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="closer-look-at-number_of_units" class="level2">
<h2 class="anchored" data-anchor-id="closer-look-at-number_of_units">3.4 Closer look at NUMBER_OF_UNITS</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Load point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can continue running the document from this point by loading the following prepared data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>realis <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/realis_cleaned.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>Taking a closer look at <code>NUMBER_OF_UNITS</code> columns reveals that <strong>12 out of 26,806 transactions</strong> involve multiple units.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>realis[<span class="fu">order</span>(<span class="sc">-</span>realis<span class="sc">$</span>NUMBER_OF_UNITS),] <span class="sc">%&gt;%</span> <span class="fu">filter</span>(NUMBER_OF_UNITS <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 13%">
<col style="width: 10%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TXN_ID</th>
<th style="text-align: left;">QUARTER</th>
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">TENURE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TXN01567</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">MEYER PARK</td>
<td style="text-align: right;">392180000</td>
<td style="text-align: right;">144883.44</td>
<td style="text-align: right;">2707</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">60</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN00083</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">BAGNALL COURT</td>
<td style="text-align: right;">115280000</td>
<td style="text-align: right;">68491.33</td>
<td style="text-align: right;">1683</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">43</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN08370</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">KEW LODGE</td>
<td style="text-align: right;">66800000</td>
<td style="text-align: right;">25177.00</td>
<td style="text-align: right;">2653</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN17572</td>
<td style="text-align: left;">2023Q4</td>
<td style="text-align: left;">KARTAR APARTMENTS</td>
<td style="text-align: right;">18000000</td>
<td style="text-align: right;">6964.31</td>
<td style="text-align: right;">2585</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN00861</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">MONDO MANSION BUILDING</td>
<td style="text-align: right;">6280000</td>
<td style="text-align: right;">5489.64</td>
<td style="text-align: right;">1144</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN10593</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">10600000</td>
<td style="text-align: right;">6746.88</td>
<td style="text-align: right;">1571</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN04100</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">61080008</td>
<td style="text-align: right;">32148.84</td>
<td style="text-align: right;">1900</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Detached House</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN06865</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">32200000</td>
<td style="text-align: right;">14123.44</td>
<td style="text-align: right;">2280</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Detached House</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN10316</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">6150000</td>
<td style="text-align: right;">4342.20</td>
<td style="text-align: right;">1416</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN12792</td>
<td style="text-align: left;">2023Q3</td>
<td style="text-align: left;">EAST VIEW GARDEN</td>
<td style="text-align: right;">6100000</td>
<td style="text-align: right;">8337.79</td>
<td style="text-align: right;">732</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN13376</td>
<td style="text-align: left;">2023Q3</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">8000000</td>
<td style="text-align: right;">3658.68</td>
<td style="text-align: right;">2187</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN24770</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">CLAYMORE PLAZA</td>
<td style="text-align: right;">7000000</td>
<td style="text-align: right;">4208.72</td>
<td style="text-align: right;">1663</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">09</td>
<td style="text-align: left;">Freehold</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Furthermore, the <code>TRANSACTED_PRICE</code> for such transactions are <strong>hundred million dollar transactions</strong>, which can skew the data if we are looking at <code>TRANSACTED_PRICE</code> with the assumption that it is the <strong>price per unit</strong>.</p>
<p>For example <strong>TXN01567</strong>, is worth <strong>$392,180,000</strong>, which is much higher that the price of individual units</p>
</section>
<section id="handling-the-bulk-transactions" class="level2">
<h2 class="anchored" data-anchor-id="handling-the-bulk-transactions">3.5 Handling the bulk transactions</h2>
<p>To address the 12 bulk transactions in our dataframe, we have 2 possible options:</p>
<ul>
<li><p><strong>Option 1</strong>: Remove these transactions as these correspond to <strong>0.045%</strong> of transactions (<span style="color:green"><strong>EASY</strong></span>)</p></li>
<li><p><strong>Option 2</strong>: Create rows for each unit in the transaction (<span style="color:red"><strong>HARD</strong></span>)</p></li>
</ul>
<p>Although Option 2 is more difficult, it is the better approach as all the transactions are <strong>Resale</strong> transactions. Simply removing them may remove very important data for the resale submarket.</p>
<p>For this solution, we need to do the following:</p>
<ol type="1">
<li>Repeat all rows by <code>NUMBER_OF_UNITS</code> times.</li>
<li>Set transacted price to the average price: <span class="math inline">\({TRANSACTED\_PRICE}\div{NUMBER\_OF\_UNITS}\)</span>.</li>
<li>Set the area (sqft) to the average area: <span class="math inline">\({AREA\_SQFT}\div{NUMBER\_OF\_UNITS}\)</span>.</li>
<li>Set <code>NUMBER_OF_UNITS</code> to 1.</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Repeating rows</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Setting column values</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Reference: <a href="https://stackoverflow.com/questions/11121385/repeat-rows-of-a-data-frame">Stackoverflow</a></p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Functions used
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>rep()</code> - to repeat a dataframe</p>
<p><code>seq_len(nrow())</code> - to iterate to each row of the dataframe</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>sales_txns <span class="ot">&lt;-</span> realis[<span class="fu">rep</span>(<span class="fu">seq_len</span>(<span class="fu">nrow</span>(realis)), realis<span class="sc">$</span>NUMBER_OF_UNITS),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lets’ check if the number of rows correspond to the total number of units sold.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(sales_txns) <span class="sc">==</span> <span class="fu">sum</span>(realis<span class="sc">$</span>NUMBER_OF_UNITS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>We will perform the changes to <code>NUMBER_OF_UNITS</code>, <code>TRANSACTED_PRICE</code>, <code>AREA_SQFT</code> in 1 code chunk so that rerunning the code chunk is idempotent and won’t mutate the variable further</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>sales_txns <span class="ot">&lt;-</span> sales_txns <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NUMBER_OF_UNITS <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRANSACTED_PRICE =</span> <span class="fu">round</span>(TRANSACTED_PRICE <span class="sc">/</span> NUMBER_OF_UNITS, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">AREA_SQFT =</span> <span class="fu">round</span>(AREA_SQFT <span class="sc">/</span> NUMBER_OF_UNITS, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NUMBER_OF_UNITS =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(sales_txns <span class="sc">%&gt;%</span> <span class="co"># Reconnect to the rest of the dataframe</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(NUMBER_OF_UNITS <span class="sc">==</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>Let us verify the result of the transformation.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Before</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">After</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>realis <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TXN_ID <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TXN00001"</span>, <span class="st">"TXN00002"</span>, <span class="co"># Single-unit transactions</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TXN10593"</span>, <span class="st">"TXN13376"</span> <span class="co"># Bulk transactions</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TXN_ID</th>
<th style="text-align: left;">QUARTER</th>
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">TENURE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TXN00001</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">THE REEF AT KING’S DOCK</td>
<td style="text-align: right;">2317000</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2625</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">04</td>
<td style="text-align: left;">99 yrs from 12/01/2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN00002</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">URBAN TREASURES</td>
<td style="text-align: right;">1823500</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2066</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN10593</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">10600000</td>
<td style="text-align: right;">6746.88</td>
<td style="text-align: right;">1571</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN13376</td>
<td style="text-align: left;">2023Q3</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">8000000</td>
<td style="text-align: right;">3658.68</td>
<td style="text-align: right;">2187</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">Freehold</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>sales_txns <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TXN_ID <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TXN00001"</span>, <span class="st">"TXN00002"</span>, <span class="co"># Single-unit transactions</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TXN10593"</span>, <span class="st">"TXN13376"</span> <span class="co"># Bulk transactions</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TXN_ID</th>
<th style="text-align: left;">QUARTER</th>
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">TYPE_OF_AREA</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">NUMBER_OF_UNITS</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">TENURE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TXN10593</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">2650000</td>
<td style="text-align: right;">1687.00</td>
<td style="text-align: right;">1571</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN10593</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">2650000</td>
<td style="text-align: right;">1687.00</td>
<td style="text-align: right;">1571</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN10593</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">2650000</td>
<td style="text-align: right;">1687.00</td>
<td style="text-align: right;">1571</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN10593</td>
<td style="text-align: left;">2023Q2</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">2650000</td>
<td style="text-align: right;">1687.00</td>
<td style="text-align: right;">1571</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN13376</td>
<td style="text-align: left;">2023Q3</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">4000000</td>
<td style="text-align: right;">1829.00</td>
<td style="text-align: right;">2187</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN13376</td>
<td style="text-align: left;">2023Q3</td>
<td style="text-align: left;">N.A.</td>
<td style="text-align: right;">4000000</td>
<td style="text-align: right;">1829.00</td>
<td style="text-align: right;">2187</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Land</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">Freehold</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TXN00001</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">THE REEF AT KING’S DOCK</td>
<td style="text-align: right;">2317000</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2625</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">04</td>
<td style="text-align: left;">99 yrs from 12/01/2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">TXN00002</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">URBAN TREASURES</td>
<td style="text-align: right;">1823500</td>
<td style="text-align: right;">882.65</td>
<td style="text-align: right;">2066</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Strata</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">Freehold</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Save point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Let us save <code>sales_txns</code> so we do not need to rerun the steps above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(sales_txns, <span class="st">"data/rds/sales_txns.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data clear point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We will use <code>sales_txns</code> from now on so we can remove <code>realis</code> from the environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(realis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="data-exploration" class="level1">
<h1>4 Data Exploration</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Load point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can continue running the document from this point by loading the following prepared data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>sales_txns <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data/rds/sales_txns.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="defining-the-audience-and-purpose-of-the-visualizations" class="level2">
<h2 class="anchored" data-anchor-id="defining-the-audience-and-purpose-of-the-visualizations">4.1 Defining the audience and purpose of the visualizations</h2>
<section id="considerations" class="level3">
<h3 class="anchored" data-anchor-id="considerations">4.1.1 Considerations</h3>
<p>It is important to note that it is quite challenging to <strong>present all data available with just 3 visualizations</strong>. We cannot cover all ground and visualize the data from all perspectives, and some blind spots and biases are bound occur in the process.</p>
<p>With this in mind, it is important that we define the <strong>audience and purpose</strong> of the visualizations.</p>
<p>The audience is a <strong>prospective private property buyer</strong> that needs help answering these questions in making decisions on buying property:</p>
<ol type="1">
<li>Should I buy a new property or a resale property?</li>
<li>Should I buy a condo, apartment, or is it worth it to save more for a landed property?</li>
<li>Which districts should I consider when buying a property?</li>
<li>Do I get a bargain compared to buying a property last year?</li>
</ol>
<p>To answer the questions above, we will focus on exploring and visualizing the <strong>distribution among the different markets</strong> (New Sale, Resale, Sub Sale).</p>
<p>The points of interest are:</p>
<ul>
<li><p>Prices (unit and total)</p></li>
<li><p>Distribution across different markets</p></li>
<li><p>Distribution by property type</p></li>
</ul>
<div class="callout callout-style-simple callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Risks when selecting data to present
</div>
</div>
<div class="callout-body-container callout-body">
<p>As we have limited space to present data (within 2-3 visualizations), we cannot include all the data available to us.</p>
<p>With this, some perspectives may be missed and we will not be able to dive deep enough all aspects of the data.</p>
</div>
</div>
</section>
<section id="unit-price-vs-transacted-price" class="level3">
<h3 class="anchored" data-anchor-id="unit-price-vs-transacted-price">4.1.2 Unit Price vs Transacted Price</h3>
<p>Given <code>AREA_SQFT</code> and <code>UNIT_PRICE_PSF</code>, it is intuitive to expect that: <span class="math display">\[AREA\_SQFT \times UNIT\_PRICE\_PSF = TRANSACTED\_PRICE\]</span></p>
<p>However, there are only <strong>7 out of 26,936</strong> transactions for which this is true.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>sales_txns <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TRANSACTED_PRICE <span class="sc">==</span> AREA_SQFT <span class="sc">*</span> UNIT_PRICE_PSF) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>This is because the final transacted price depends on other factors like size of property, floor height, where the property is facing, etc. Most of these <strong>factors are not reflected</strong> in the dataset we have.</p>
<p>Hence, to have a fairer comparison with what we have, we will use <strong>UNIT_PRICE_PSF</strong> for price comparisons.</p>
</section>
<section id="compare-all-quarters-or-two-quarters" class="level3">
<h3 class="anchored" data-anchor-id="compare-all-quarters-or-two-quarters">4.1.3 Compare all quarters or two quarters</h3>
<p>In answering the questions we define (and based on the specifications of the exercise), the data partition for the visualization is by <code>TYPE_OF_SALE</code> as we want to look for trends from the different submarkets.</p>
<p>We current have <strong>5 quarters</strong> in our dataset, <strong>3</strong> submarkets. This means <strong>15 facets</strong>, which may be too much for division for visualization. It is also difficult to see at a glance when information we are trying to communicate if there are many very small graphs.</p>
<p>In addition, if we want to dive even deeper by <code>PROPERTY_TYPE</code>, which has 6 possible values, that is <strong>90 data subsets</strong> we need to present.</p>
<p>Hence to simplify the visualization, we will choose only the <code>2023Q1</code> and <code>2024Q1</code>, which should suffice for our purpose of comparing the state of the market to last year’s as we are comparing the same time of the year.</p>
<p>Hence, we will produce the data frames to contain these data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>sales_txns_q1_2324 <span class="ot">&lt;-</span> sales_txns <span class="sc">%&gt;%</span> <span class="fu">filter</span>(QUARTER <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023Q1"</span>, <span class="st">"2024Q1"</span>))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>sales_txns_q1_23 <span class="ot">&lt;-</span> sales_txns_q1_2324 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(QUARTER <span class="sc">==</span> <span class="st">"2023Q1"</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>sales_txns_q1_24 <span class="ot">&lt;-</span> sales_txns_q1_2324 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(QUARTER <span class="sc">==</span> <span class="st">"2024Q1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="visualization-1-2023q1-and-2024q1-prices" class="level2">
<h2 class="anchored" data-anchor-id="visualization-1-2023q1-and-2024q1-prices">4.2 Visualization 1: 2023Q1 and 2024Q1 prices</h2>
<p>First we will compare the prices between the <strong>First Quarter</strong> of 2023 and 2024. This is to compare the prices at the same time of the year.</p>
<p>For this visualization, we will use the <strong>Unit Price per Sqft</strong> (<code>UNIT_PRICE_PSF</code>) instead of the <strong>Transaction Price</strong> (<code>TRANSACTED_PRICE</code>). This is so we can more fairly compare prices with less variables involved. With Transaction Price, the size of the property needs to be considered.</p>
<p>We will use the <code>TYPE_OF_SALE</code> column to partition the data so we can compare the trends across the <strong>Resale, New Sale and Sub Sale markets</strong>.</p>
<section id="creating-the-base-visualization" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-base-visualization">4.2.1 Creating the base Visualization</h3>
<p>For the visualization, we will use a <strong>Raincloud Plot</strong> so that we can see the patterns in the price trends, and whether there are clusters of interest within the data set.</p>
<p>We will also add a <strong>boxplot</strong> to accompany the half-density plot so that we can see the quantiles more clearly.</p>
<p>To compare the different quarters, we will use both <strong>left side and right side</strong> visualization to compare the quarters side by side. This is inspired by a <a href="https://akalestale.netlify.app/take-home_ex/take-home_ex01/take-home_ex01">senior’s work.</a></p>
<p>To visualize the volumes, the 2 options are using <code>stat_dots()</code> or <code>geom_jitter()</code>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Raincloud Plot w/ volume plot (chosen)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Raincloud Plot w/ jitter plot (alternative)</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>plot_q1_yoy_psf_price <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    sales_txns_q1_2324,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> QUARTER,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> UNIT_PRICE_PSF,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> QUARTER,</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> QUARTER</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate half-density plot</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_halfeye</span>(</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">justification =</span> <span class="fu">ifelse</span>(QUARTER <span class="sc">==</span> <span class="st">"2023Q1"</span>, <span class="fl">1.20</span>, <span class="fl">0.02</span>),</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">side =</span> <span class="fu">ifelse</span>(QUARTER <span class="sc">==</span> <span class="st">"2023Q1"</span>, <span class="st">"left"</span>, <span class="st">"right"</span>)</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">x =</span> <span class="fl">0.1</span>, <span class="at">y =</span> <span class="dv">0</span>),</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">.width =</span> <span class="dv">0</span>,</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">point_color =</span> <span class="cn">NA</span>,</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate boxplot along edge of half-density plot</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">outlier.shape =</span> <span class="cn">NA</span>,</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> .<span class="dv">1</span>,</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate volume plots, adjusting sizing so as to not overflow into the other half</span></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dots</span>(</span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">side =</span> <span class="fu">ifelse</span>(QUARTER <span class="sc">==</span> <span class="st">"2024Q1"</span>, <span class="st">"left"</span>, <span class="st">"right"</span>),</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">justification =</span> <span class="fu">ifelse</span>(QUARTER <span class="sc">==</span> <span class="st">"2024Q1"</span>, <span class="fl">1.10</span>,<span class="sc">-</span><span class="fl">0.1</span>)</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">binwidth =</span> <span class="dv">100</span>,</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">dotsize =</span> <span class="fl">0.005</span>,</span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add text about the median price</span></span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(</span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"S$"</span>, <span class="fu">after_stat</span>(y))),</span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">geom =</span> <span class="st">"text"</span>,</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">fun =</span> <span class="st">"median"</span>,</span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="dv">2500</span>),</span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Roboto Condensed"</span>,</span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb34-54"><a href="#cb34-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb34-55"><a href="#cb34-55" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-56"><a href="#cb34-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-57"><a href="#cb34-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set colors and fill</span></span>
<span id="cb34-58"><a href="#cb34-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Keep it simple, and use bright color for 20424Q1 it is the focus of visualization</span></span>
<span id="cb34-59"><a href="#cb34-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey45"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb34-60"><a href="#cb34-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey45"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb34-61"><a href="#cb34-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Unit Price Per Sqft ($)"</span>) <span class="sc">+</span></span>
<span id="cb34-62"><a href="#cb34-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Next steps will take care of theme enhancements</span></span>
<span id="cb34-63"><a href="#cb34-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb34-64"><a href="#cb34-64" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-65"><a href="#cb34-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-66"><a href="#cb34-66" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_q1_yoy_psf_price</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>plot_q1_yoy_psf_price_alt <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    sales_txns_q1_2324,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> QUARTER,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> UNIT_PRICE_PSF,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> QUARTER,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> QUARTER</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate half-density plot</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_halfeye</span>(</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> QUARTER,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">justification =</span> <span class="fu">ifelse</span>(QUARTER <span class="sc">==</span> <span class="st">"2023Q1"</span>, <span class="fl">1.22</span>, <span class="dv">0</span>),</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">side =</span> <span class="fu">ifelse</span>(QUARTER <span class="sc">==</span> <span class="st">"2023Q1"</span>, <span class="st">"left"</span>, <span class="st">"right"</span>)</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">x =</span> <span class="fl">0.1</span>, <span class="at">y =</span> <span class="dv">0</span>),</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">.width =</span> <span class="dv">0</span>,</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">point_color =</span> <span class="cn">NA</span>,</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate jitter plot under the geom plot so the dots don't overpower the boxplot</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="fl">0.08</span>,</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fl">0.01</span>,</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate boxplot along edge of half-density plot</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">outlier.shape =</span> <span class="cn">NA</span>,</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="fl">0.1</span>,</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add text about the median price</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(</span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"S$"</span>, <span class="fu">after_stat</span>(y))),</span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">geom =</span> <span class="st">"text"</span>,</span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">fun =</span> <span class="st">"median"</span>,</span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="dv">2500</span>),</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"Roboto Condensed"</span>,</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set colors and fill</span></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Keep it simple, and use bright color for 20424Q1 it is the focus of visualization</span></span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Unit Price Per Sqft ($)"</span>) <span class="sc">+</span></span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Next steps will take care of theme enhancements</span></span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-62"><a href="#cb35-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-63"><a href="#cb35-63" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_q1_yoy_psf_price_alt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Decision: stat_dots()
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using <code>stat_dots()</code> is better than <code>geom_jitter()</code> as the purpose of providing volume information here is to <strong>accompany the half-density plot</strong> and provide a tool to compare the volume of each submarket.</p>
<p>Comparing the length of each horizontal line is much easier to do than comparing how dark each area is in a jitter plot.</p>
</div>
</div>
<p>Now that we have the base visualization, we will generate the final visualization.</p>
</section>
<section id="adding-the-change" class="level3">
<h3 class="anchored" data-anchor-id="adding-the-change">4.2.2 Adding the % change</h3>
<p>When generating the facet name, we also can add the % change so that it is clear for the audience how much the prices change.</p>
<p>We will use the following function to render the % change, which will show as <span style="color:darkgreen"><strong>+x.x%</strong></span> when there is an increase, and <span style="color:brown"><strong>-x.x%</strong></span> when there is a decrease.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>show_price_pc_change <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">market =</span> <span class="st">"1"</span>) {</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  data2023 <span class="ot">=</span> sales_txns_q1_23</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  data2024 <span class="ot">=</span> sales_txns_q1_24</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1 is the facet name for All markets</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (market <span class="sc">!=</span> <span class="st">"1"</span>) {</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    data2023 <span class="ot">=</span> data2023 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TYPE_OF_SALE <span class="sc">==</span> market)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    data2024 <span class="ot">=</span> data2024 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TYPE_OF_SALE <span class="sc">==</span> market)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    market <span class="ot">=</span> <span class="st">"All Markets"</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  median2023 <span class="ot">=</span> data2023<span class="sc">$</span>UNIT_PRICE_PSF <span class="sc">%&gt;%</span> <span class="fu">median</span>()</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  median2024 <span class="ot">=</span> data2024<span class="sc">$</span>UNIT_PRICE_PSF <span class="sc">%&gt;%</span> <span class="fu">median</span>()</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sprintf</span>(</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"%s (&lt;span style='color:%s;'&gt;**%s%0.1f%%**&lt;/span&gt;)"</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    market,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(median2024 <span class="sc">&lt;</span> median2023, <span class="st">"brown"</span>, <span class="st">"darkgreen"</span>),</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(median2024 <span class="sc">&lt;</span> median2023, <span class="st">"-"</span>, <span class="st">"+"</span>),</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    (median2024 <span class="sc">-</span> median2023) <span class="sc">*</span> <span class="dv">100</span> <span class="sc">/</span> median2023</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-the-visualization" class="level3">
<h3 class="anchored" data-anchor-id="generating-the-visualization">4.2.3 Generating the visualization</h3>
<p>We want to compare the 2023 and 2024 Q1 sales for different submarkets. To do this, we will use <code>facet_wrap()</code> on <code>TYPE_OF_SALE</code>.</p>
<p>In addition, we will add another facet for <strong>All Markets</strong> for the overall comparison.</p>
<p>These 2 plots will be shown side by side using <code>patchwork</code>.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
facet_grid(margin = TRUE) as alternative
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can also use <code>facet_grid(margin = TRUE)</code> to generate a facet with all the data, instead of generating 2 separate plots.</p>
<p>However, I would like to change the panel color for the overall plot to highlight it but I couldn’t find a way to do it within <code>facet_grid()</code>.</p>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>q1_yoy_psf_price_submarkets_graph <span class="ot">&lt;-</span> <span class="fu">plot_q1_yoy_psf_price</span>() <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> TYPE_OF_SALE,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">strip.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">labeller =</span> <span class="fu">labeller</span>(</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">TYPE_OF_SALE =</span> <span class="fu">c</span>(</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"New Sale"</span> <span class="ot">=</span> <span class="fu">show_price_pc_change</span>(<span class="st">"New Sale"</span>),</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Sub Sale"</span> <span class="ot">=</span> <span class="fu">show_price_pc_change</span>(<span class="st">"Sub Sale"</span>),</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Resale"</span> <span class="ot">=</span> <span class="fu">show_price_pc_change</span>(<span class="st">"Resale"</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>              )) <span class="sc">+</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>())</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>q1_yoy_psf_price_all_markets_graph <span class="ot">&lt;-</span> <span class="fu">plot_q1_yoy_psf_price</span>() <span class="sc">+</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> NUMBER_OF_UNITS,</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">as_labeller</span>(show_price_pc_change)</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Transaction Price (,000 SGD)"</span>) <span class="sc">+</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"aliceblue"</span>, <span class="at">linewidth =</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>                                          <span class="dv">0</span>))</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="co"># As much as we want the plot annotations to be dynamic, the subtitle is depending on the actual data</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Only this part is hardcoded</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>viz1 <span class="ot">&lt;-</span> (q1_yoy_psf_price_all_markets_graph <span class="sc">|</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>           q1_yoy_psf_price_submarkets_graph) <span class="sc">+</span></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Singapore Private Property Prices by Sales Market"</span>,</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>                  <span class="at">subtitle =</span> <span class="st">"Overall prices slightly increased by &lt;span style='color:darkgreen;'&gt;**1.2%**&lt;/span&gt; but the New Sales market experienced &lt;span style='color:brown;'&gt;**7.6%**&lt;/span&gt; decrease."</span>) <span class="sc">&amp;</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Roboto Condensed"</span>),</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_line</span>(),</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.placement =</span> <span class="st">"outside"</span>,</span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_markdown</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>))</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>viz1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Insights
</div>
</div>
<div class="callout-body-container callout-body">
<p>While the market generally saw a slight increase in unit prices from Q1 2023, the <strong>New Sale</strong> market experienced a decline. Notable clusters in the graph suggest concentrated sales around specific price points, likely influenced by factors such as <strong>developer pricing</strong> and the <strong>location of New Launches</strong>. According to data from <a href="http://127.0.0.1:18117/#0" title="https://www.99.co/singapore/new-launches">99.co</a>, there are fewer than 10 New Launches in 2024.</p>
<p>New Launched projects, particularly big ones, resulted in clusters on certain price points as they introduce fresh supply in the districts they are located in. The demand for these properties also contributed to the trend as transactions are completed by buyers.<br>
<br>
In contrast, the Resale Market, which is comprised of properties already turned over by developers, shows a smoother distribution of prices. This is attributed to the wider variation in prices negotiated between buyers and sellers on available properties all over Singapore, which is not constrained by the parameters of specific projects.</p>
</div>
</div>
<p>However, it is important to note that visualization can be very <strong>misleading</strong> especially on the New Sale Market. Generalizing that the trends when there are notable cluster may not be representative of the real state of the market.</p>
<p>Hence, we need to look more deeply into these groups and present it as a visualizations so it can be better understood why there are groups that formed.</p>
</section>
</section>
<section id="visualization-2-2023q1-and-2024q1-sales-volume" class="level2">
<h2 class="anchored" data-anchor-id="visualization-2-2023q1-and-2024q1-sales-volume">4.3 Visualization 2: 2023Q1 and 2024Q1 Sales Volume</h2>
<section id="understanding-the-groups-in-new-sales-market" class="level3">
<h3 class="anchored" data-anchor-id="understanding-the-groups-in-new-sales-market">4.3.1 Understanding the groups in New Sales Market</h3>
<p>We hypothesized that the groups that are present in the <strong>New Sales</strong> plot is due to the sales of <strong>newly-launched projects</strong>.</p>
<p>We will check the aggregated data by <code>PROJECT_NAME</code> and <code>POSTAL_DISTRICT</code> to verify our hypothesis that the sales are clustered by newly launched projects and their respective districts</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">By Project Name</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">By District</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<p>We will aggregate the <strong>number of sales</strong> and <strong>median unit price</strong> by projects. We will also add <code>POSTAL_DISTRICT</code> to the aggregation group as property prices depend on which district a property is in.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>sales_txns_q1_24 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TYPE_OF_SALE <span class="sc">==</span> <span class="st">"New Sale"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(POSTAL_DISTRICT, PROJECT_NAME) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">MEDIAN_PRICE_PSF =</span> <span class="fu">median</span>(UNIT_PRICE_PSF),</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NUMBER_OF_SALES =</span> <span class="fu">n</span>()</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(NUMBER_OF_SALES)) <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">row.name =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 3%">
<col style="width: 20%">
<col style="width: 32%">
<col style="width: 22%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: left;">PROJECT_NAME</th>
<th style="text-align: right;">MEDIAN_PRICE_PSF</th>
<th style="text-align: right;">NUMBER_OF_SALES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">LENTOR MANSION</td>
<td style="text-align: right;">2269.0</td>
<td style="text-align: right;">409</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">LUMINA GRAND</td>
<td style="text-align: right;">1525.0</td>
<td style="text-align: right;">370</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">HILLHAVEN</td>
<td style="text-align: right;">2067.0</td>
<td style="text-align: right;">79</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">LENTORIA</td>
<td style="text-align: right;">2129.0</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">THE BOTANY AT DAIRY FARM</td>
<td style="text-align: right;">2019.0</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">27</td>
<td style="text-align: left;">NORTH GAIA</td>
<td style="text-align: right;">1326.5</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">THE ARCADY AT BOON KENG</td>
<td style="text-align: right;">2573.5</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">LENTOR HILLS RESIDENCES</td>
<td style="text-align: right;">2109.0</td>
<td style="text-align: right;">49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">26</td>
<td style="text-align: left;">HILLOCK GREEN</td>
<td style="text-align: right;">2169.0</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">THE MYST</td>
<td style="text-align: right;">2160.5</td>
<td style="text-align: right;">42</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can see that <strong>8 out of 10</strong> projects with highest number of sales are in <strong>Districts 23 and 26.</strong> This is consistent with our previous observation that there are 2 groups in the New Sales density graph.</p>
<p>Furthermore, in <a href="https://www.99.co/singapore/new-launches">99.co’s New Launches page</a>, <a href="https://www.99.co/singapore/condos-apartments/lentor-mansion">Lentor Mansion</a> (D26) and <a href="https://www.99.co/singapore/condos-apartments/lumina-grand">Lumina Grand</a> (D23) are the biggest projects with the highest number of units sold.</p>
<p>Hence, the density graph could reflected the groups that formed from the sales of properties within these 2 projects.</p>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>sales_txns_q1_24 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TYPE_OF_SALE <span class="sc">==</span> <span class="st">"New Sale"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(POSTAL_DISTRICT) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">MEDIAN_PRICE_PSF =</span> <span class="fu">median</span>(UNIT_PRICE_PSF),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NUMBER_OF_SALES =</span> <span class="fu">n</span>()</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(NUMBER_OF_SALES)) <span class="sc">%&gt;%</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">row.names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: right;">MEDIAN_PRICE_PSF</th>
<th style="text-align: right;">NUMBER_OF_SALES</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1542.0</td>
<td style="text-align: right;">576</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">26</td>
<td style="text-align: right;">2253.0</td>
<td style="text-align: right;">571</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">15</td>
<td style="text-align: right;">2615.5</td>
<td style="text-align: right;">72</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">21</td>
<td style="text-align: right;">2453.0</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">27</td>
<td style="text-align: right;">1328.0</td>
<td style="text-align: right;">56</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">12</td>
<td style="text-align: right;">2573.0</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">11</td>
<td style="text-align: right;">3189.0</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">10</td>
<td style="text-align: right;">3307.0</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">03</td>
<td style="text-align: right;">2807.0</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">05</td>
<td style="text-align: right;">2607.5</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">28</td>
<td style="text-align: right;">2254.0</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">16</td>
<td style="text-align: right;">2091.0</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">22</td>
<td style="text-align: right;">2215.0</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">14</td>
<td style="text-align: left;">09</td>
<td style="text-align: right;">3437.5</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">15</td>
<td style="text-align: left;">02</td>
<td style="text-align: right;">2567.0</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: left;">07</td>
<td style="text-align: right;">3234.0</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: left;">19</td>
<td style="text-align: right;">1966.0</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">14</td>
<td style="text-align: right;">2168.0</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">18</td>
<td style="text-align: right;">1754.0</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">04</td>
<td style="text-align: right;">2548.5</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: left;">17</td>
<td style="text-align: right;">1895.0</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Although there are new units across all districts, the big, newly launched projects contributed the most to the New Sales Market.</p>
<p>This is hinted by the fact that after aggregating all property sales by district, D23 and D26 where <a href="https://www.99.co/singapore/condos-apartments/lumina-grand">Lumina Grand</a> and <a href="https://www.99.co/singapore/condos-apartments/lentor-mansion">Lentor Mansion</a> stand out. More than 60% of sales from each of these district also come from these 2 projects.</p>
</div>
</div>
</div>
<p>Based on the findings from this deep dive, we will visualize the sales volume by district.</p>
</section>
<section id="creating-the-base-visualization-1" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-base-visualization-1">4.3.2. Creating the base visualization</h3>
<p>Some of the options we have to visualize the sales by district are:</p>
<ul>
<li><p>Bar graph of number of sales for <strong>all</strong> districts, or</p></li>
<li><p>Bar graph of number of sales for <strong>most popular</strong> districts</p></li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">All districts</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Most popular districts (chosen)</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>plot_q1_yoy_sale_vol <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  sales_txns_q1_2324,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> POSTAL_DISTRICT, <span class="at">fill =</span> QUARTER)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"dodge"</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey45"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_q1_yoy_sale_vol</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<p>This visualization needs some pre-processing so we can determine the Top 5 most popular districts in each submarket.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>popular_districts <span class="ot">&lt;-</span> sales_txns_q1_2324 <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(QUARTER, POSTAL_DISTRICT, TYPE_OF_SALE) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">MEDIAN_PRICE_PSF =</span> <span class="fu">median</span>(UNIT_PRICE_PSF),</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">NUMBER_OF_SALES =</span> <span class="fu">n</span>()</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(QUARTER, TYPE_OF_SALE) <span class="sc">%&gt;%</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(NUMBER_OF_SALES)) <span class="sc">%&gt;%</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RANK =</span> <span class="fu">order</span>(NUMBER_OF_SALES, <span class="at">decreasing=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RANK <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(QUARTER, TYPE_OF_SALE, RANK, POSTAL_DISTRICT, NUMBER_OF_SALES, MEDIAN_PRICE_PSF)) <span class="sc">%&gt;%</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(QUARTER)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(popular_districts, <span class="at">row.names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 3%">
<col style="width: 10%">
<col style="width: 16%">
<col style="width: 6%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">QUARTER</th>
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: right;">RANK</th>
<th style="text-align: left;">POSTAL_DISTRICT</th>
<th style="text-align: right;">NUMBER_OF_SALES</th>
<th style="text-align: right;">MEDIAN_PRICE_PSF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">19</td>
<td style="text-align: right;">401</td>
<td style="text-align: right;">1337.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">15</td>
<td style="text-align: right;">260</td>
<td style="text-align: right;">1830.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">10</td>
<td style="text-align: right;">251</td>
<td style="text-align: right;">2162.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">16</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">1410.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">208</td>
<td style="text-align: right;">1258.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">10</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">2942.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">178</td>
<td style="text-align: right;">2071.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">18</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1390.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">16</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">2084.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">09</td>
<td style="text-align: right;">150</td>
<td style="text-align: right;">2846.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">19</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">1635.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">14</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">2096.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">13</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">1913.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">14</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">18</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">1598.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">15</td>
<td style="text-align: left;">2023Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">05</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">1912.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">1542.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">26</td>
<td style="text-align: right;">571</td>
<td style="text-align: right;">2253.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">19</td>
<td style="text-align: right;">429</td>
<td style="text-align: right;">1448.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">15</td>
<td style="text-align: right;">243</td>
<td style="text-align: right;">1719.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">10</td>
<td style="text-align: right;">236</td>
<td style="text-align: right;">2171.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">209</td>
<td style="text-align: right;">1361.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">22</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Resale</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">18</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">1350.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">19</td>
<td style="text-align: right;">94</td>
<td style="text-align: right;">1771.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">24</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">15</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">2615.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">25</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">21</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">2453.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">26</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">New Sale</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">27</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">1328.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">27</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">05</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">2061.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">28</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">18</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">1694.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">29</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">13</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">2044.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">30</td>
<td style="text-align: left;">2024Q1</td>
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">14</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">2051.5</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now that we have this aggregated dataset, we can use this to plot the ranked data. For example, we can plot the most popular districts in the New Sales Market.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(popular_districts <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TYPE_OF_SALE <span class="sc">==</span><span class="st">"New Sale"</span>),</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(RANK, <span class="sc">-</span>RANK), <span class="at">y =</span> NUMBER_OF_SALES, <span class="at">fill =</span> QUARTER))<span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">10</span>, <span class="at">hjust=</span><span class="dv">0</span>, <span class="at">label=</span><span class="fu">paste0</span>(<span class="st">"D"</span>, POSTAL_DISTRICT, <span class="st">": "</span>, NUMBER_OF_SALES))) <span class="sc">+</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">ylim=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">600</span>)) <span class="sc">+</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey45"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>QUARTER)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>With this visualization, we can compare the top districts from 2 quarters side by side.</p>
</div>
</div>
</div>
<p>From the 2 options, plotting the <strong>Most Popular Districts</strong> is more appropriate for our use case. This is because we would like the user to recognize which districts are driving the price trends.</p>
<p>When we plot all the districts, it is more difficult to identify by sight which districts are popular in a quarter and the other. This is because this plot has a lot of noise, which may not be that relevant to connect to the previous visualization.</p>
</section>
<section id="generating-the-visualization-1" class="level3">
<h3 class="anchored" data-anchor-id="generating-the-visualization-1">4.3.3 Generating the visualization</h3>
<p>We will generate the visualization such that <code>QUARTER</code> is in column and <code>TYPE_OF_SALE</code> is in rows.</p>
<p>We will using <code>facet_grid()</code> to generate the visualization and adjust the theme elements as needed to make the plot more presentable.</p>
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>viz2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(popular_districts,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>         <span class="co"># Order the axis elements by rank</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="fu">reorder</span>(RANK,<span class="sc">-</span>RANK),</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> NUMBER_OF_SALES,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> QUARTER</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>       )) <span class="sc">+</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate bar graph based on number of sales</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">"identity"</span>,</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add descriptive label</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="dv">10</span>,</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">sprintf</span>(</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">"D%s: %d units sold at S$%0.2f psf"</span>,</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>      POSTAL_DISTRICT,</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>      NUMBER_OF_SALES,</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>      MEDIAN_PRICE_PSF</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">family =</span> <span class="st">"Roboto Condensed"</span>) <span class="sc">+</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate horizontal bar</span></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">600</span>)) <span class="sc">+</span></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set colors consistent with previous visualization</span></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey45"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate facets, with labels to the left and at the bottom</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(TYPE_OF_SALE <span class="sc">~</span> QUARTER, <span class="at">switch =</span> <span class="st">"both"</span>) <span class="sc">+</span></span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set plot texts</span></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Districts With Highest Units Sold for Each Submarket"</span>,</span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>                  <span class="at">subtitle =</span> <span class="st">"New Sale Market is heavily influenced by the newly-launched projects in **D23** (Lumina Grand) and **D26** (Lentor Mansion)."</span>,</span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>                  <span class="at">caption =</span> <span class="st">"Prices shown are **median unit price** per sqft"</span>) <span class="sc">&amp;</span></span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set theme</span></span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Roboto Condensed"</span>),</span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_line</span>(),</span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use element_markdown so we can style the text</span></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_markdown</span>(<span class="at">color =</span> <span class="st">"grey50"</span>),</span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.placement =</span> <span class="st">"outside"</span>,</span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>))</span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a>viz2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
About the texts in the visualization
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Texts such as <em>xx units sold at $xxxx.xx</em> were added in the plot so the information is easily digestible.</p>
<p>However, it made the plot messy, and not aesthetically pleasing. Ideally, the full text should be rendered when interacting with the graph. I do not know how to do that right now, but it will be how I will present this visualization in the future.</p>
<p>Given this limit in my present abilities, I prioritized <strong>clarity of information</strong> over aesthetic considerations.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Insights
</div>
</div>
<div class="callout-body-container callout-body">
<p>Plotting the most popular districts for each submarket reveals that the Top 5 districts in the <strong>New Sale</strong> market, differs for the 2 quarters.</p>
<p>In 2023Q1, the distribution is more balanced and there were a lot of units sold in expensive districts like <strong>Districts 9</strong> and <strong>10</strong>. However, In 2024Q1, the number of units sold were skewed towards cheaper districts like <strong>Districts 23</strong> and <strong>26</strong> where big projects like <a href="https://www.99.co/singapore/condos-apartments/lumina-grand">Lumina Grand</a> and <a href="https://www.99.co/singapore/condos-apartments/lentor-mansion">Lentor Mansion</a>, respectively, were launched.</p>
<p>This is why the overall prices in the New Sale market appear to be much cheaper than the previous year, when in fact the new projects that launched are in <strong>cheaper districts</strong>.</p>
<p>On the contrary, the top districts in the Resale and Sub Sale markets have much less difference. This smaller change also resulted in a smaller impact on the overall median price in these markets.</p>
</div>
</div>
</section>
</section>
<section id="visualization-3-2024-q1-market-by-property-type" class="level2">
<h2 class="anchored" data-anchor-id="visualization-3-2024-q1-market-by-property-type">4.4 Visualization 3: 2024 Q1 Market by Property Type</h2>
<section id="checking-price-trends-by-property-type" class="level3">
<h3 class="anchored" data-anchor-id="checking-price-trends-by-property-type">4.4.1 Checking price trends by property type</h3>
<p>Previous visualizations focused on comparisons between the Q1 of 2023 and 2024, and based on the different markets.</p>
<p>For the next visualization, we will first explore the data with <strong>2024Q1</strong>, based on the property type.</p>
<p>Let us group the data by <strong>TYPE_OF_SALE</strong> and <strong>PROPERTY_TYPE</strong> if we can gain new insights based on the size of property. We will get the aggregated median values for price and area columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>sales_txns_q1_24 <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TYPE_OF_SALE, PROPERTY_TYPE) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">UNIT_PRICE_PSF =</span> <span class="fu">median</span>(UNIT_PRICE_PSF),</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">TRANSACTED_PRICE =</span> <span class="fu">median</span>(TRANSACTED_PRICE),</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">AREA_SQFT =</span> <span class="fu">median</span>(AREA_SQFT),</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">UNITS_SOLD =</span> <span class="fu">n</span>()</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(UNITS_SOLD), <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  kable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 25%">
<col style="width: 17%">
<col style="width: 19%">
<col style="width: 11%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TYPE_OF_SALE</th>
<th style="text-align: left;">PROPERTY_TYPE</th>
<th style="text-align: right;">UNIT_PRICE_PSF</th>
<th style="text-align: right;">TRANSACTED_PRICE</th>
<th style="text-align: right;">AREA_SQFT</th>
<th style="text-align: right;">UNITS_SOLD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">2277.0</td>
<td style="text-align: right;">1908500</td>
<td style="text-align: right;">796.540</td>
<td style="text-align: right;">864</td>
</tr>
<tr class="even">
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1516.0</td>
<td style="text-align: right;">1515000</td>
<td style="text-align: right;">995.670</td>
<td style="text-align: right;">448</td>
</tr>
<tr class="odd">
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">2204.0</td>
<td style="text-align: right;">2083000</td>
<td style="text-align: right;">990.290</td>
<td style="text-align: right;">290</td>
</tr>
<tr class="even">
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">2254.0</td>
<td style="text-align: right;">3655000</td>
<td style="text-align: right;">1614.600</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="odd">
<td style="text-align: left;">New Sale</td>
<td style="text-align: left;">Detached House</td>
<td style="text-align: right;">1790.0</td>
<td style="text-align: right;">11690000</td>
<td style="text-align: right;">6607.855</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1580.5</td>
<td style="text-align: right;">1660000</td>
<td style="text-align: right;">1119.460</td>
<td style="text-align: right;">1480</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1718.5</td>
<td style="text-align: right;">1460000</td>
<td style="text-align: right;">893.410</td>
<td style="text-align: right;">796</td>
</tr>
<tr class="even">
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Executive Condominium</td>
<td style="text-align: right;">1305.0</td>
<td style="text-align: right;">1375000</td>
<td style="text-align: right;">1076.400</td>
<td style="text-align: right;">395</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1751.0</td>
<td style="text-align: right;">3750000</td>
<td style="text-align: right;">2055.920</td>
<td style="text-align: right;">197</td>
</tr>
<tr class="even">
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">1665.0</td>
<td style="text-align: right;">5642500</td>
<td style="text-align: right;">3459.010</td>
<td style="text-align: right;">92</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resale</td>
<td style="text-align: left;">Detached House</td>
<td style="text-align: right;">1503.0</td>
<td style="text-align: right;">10940000</td>
<td style="text-align: right;">7004.130</td>
<td style="text-align: right;">38</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: left;">Apartment</td>
<td style="text-align: right;">1914.0</td>
<td style="text-align: right;">1473000</td>
<td style="text-align: right;">721.190</td>
<td style="text-align: right;">193</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: left;">Condominium</td>
<td style="text-align: right;">1772.5</td>
<td style="text-align: right;">1525000</td>
<td style="text-align: right;">742.720</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: left;">Terrace House</td>
<td style="text-align: right;">1482.5</td>
<td style="text-align: right;">3229000</td>
<td style="text-align: right;">2195.855</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sub Sale</td>
<td style="text-align: left;">Semi-Detached House</td>
<td style="text-align: right;">1171.0</td>
<td style="text-align: right;">4750000</td>
<td style="text-align: right;">4058.030</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>From this aggregated data, we can see that <strong>Executive Condominiums</strong> are relatively cheaper than <strong>Condominiums</strong> and <strong>Apartments</strong>, which are of similar area. From my research, Executive Condominiums are under <a href="https://www.hdb.gov.sg/residential/buying-a-flat/executive-condominium">HDB</a>, but are built and sold by property developers. This is why it is much cheaper.</p>
<p>We can also notice that there are much lower sales for some property types, like <strong>Terrace House</strong>, <strong>Semi-Detached House</strong>, and <strong>Detached House.</strong> These are landed properties, which are quite rare in Singapore so it is logical to see much fewer sales of these properties.</p>
</section>
<section id="creating-base-visualizations" class="level3">
<h3 class="anchored" data-anchor-id="creating-base-visualizations">4.4.2 Creating base visualizations</h3>
<p>From the insights gained from our initial exploration, we observed that prices differ by property types and that there are less sales on some property prices.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Unit Price</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Volume</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<p>For the unit price, we will use <strong>boxplot</strong> instead of density plots as we can see the distribution for different markets. If we use density plots, it is harder to present partitioned data in an easy to understand way.</p>
<p>Lastly, we will generate some reference lines for statistics (mean and median).</p>
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for reference lines</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>median_q1 <span class="ot">&lt;-</span> <span class="fu">median</span>(sales_txns_q1_24<span class="sc">$</span>UNIT_PRICE_PSF)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>mean_q1 <span class="ot">&lt;-</span> <span class="fu">mean</span>(sales_txns_q1_24<span class="sc">$</span>UNIT_PRICE_PSF)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>unit_price_by_prop_type <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_txns_q1_24,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">aes</span>(<span class="at">x =</span> PROPERTY_TYPE, <span class="at">y =</span> UNIT_PRICE_PSF, <span class="at">fill =</span> TYPE_OF_SALE)) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate different boxplots for each market and property type</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outliers =</span> <span class="cn">FALSE</span>,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.4</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Render median reference line</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> median_q1, <span class="at">color =</span> <span class="st">"Median"</span>),</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"text"</span>,</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">6.6</span>,</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">ifelse</span>(median_q1 <span class="sc">&lt;</span> mean_q1, median_q1 <span class="sc">-</span> <span class="dv">200</span>, median_q1 <span class="sc">+</span> <span class="dv">250</span>),</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"Median =</span><span class="sc">\n</span><span class="st">$"</span>, median_q1),</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Roboto Condensed"</span>,</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"brown"</span>,</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Render mean reference line</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> mean_q1, <span class="at">color =</span> <span class="st">"Mean"</span>),</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"text"</span>,</span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">6.6</span>,</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">ifelse</span>(mean_q1 <span class="sc">&lt;</span> median_q1, mean_q1 <span class="sc">-</span> <span class="dv">200</span>, mean_q1 <span class="sc">+</span> <span class="dv">250</span>),</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"Mean =</span><span class="sc">\n</span><span class="st">$"</span>, <span class="fu">round</span>(mean_q1, <span class="dv">0</span>)),</span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Roboto Condensed"</span>,</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"darkgreen"</span>,</span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set labels</span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Property Type"</span>,</span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Unit Price Per Sqft ($)"</span>,</span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Market"</span>,</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Statistics"</span>) <span class="sc">+</span></span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Wrap long labels using `wrap_format()` from `scale` package</span></span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add some space to the right for Statistics annotations</span></span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">wrap_format</span>(<span class="dv">10</span>), <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set colors</span></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"blue"</span>, <span class="st">"gold3"</span>)) <span class="sc">+</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>, <span class="st">"brown"</span>)) <span class="sc">+</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove axis text. Combining this with the price visualization will stack the 2 graphs</span></span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>unit_price_by_prop_type</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see from the graph that some box plots are very short, which is especially true for <strong>Landed</strong> properties as there are few units sold for these property types.</p>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<p>As companion to the unit price graph, we will also generate a simple bar graph for the volume.</p>
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>sales_volume_by_prop_type <span class="ot">&lt;-</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    sales_txns_q1_24,</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> PROPERTY_TYPE, <span class="at">fill =</span> TYPE_OF_SALE)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate stacked bar graph by TYPE_OF_SALE</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Do not show label as the price graph will show it</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate labels for stacked bar areas</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Do not show label as the price graph will show it</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use ggrepel as some areas in the bar graph are too small to render th text inside</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(count)),</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">"count"</span>,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"stack"</span>,</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"Roboto Condensed"</span>,</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">2.5</span>,</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply colors</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"blue"</span>, <span class="st">"gold3"</span>)) <span class="sc">+</span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Units Sold"</span>) <span class="sc">+</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Wrap long titles</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply same "expand" so axes align</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">wrap_format</span>(<span class="dv">10</span>), <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appply theme</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>()</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>sales_volume_by_prop_type</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The volume graph provides additional information about sales by property type. Some property types with lower sales volume may show a longer boxplot, which may be interpreted as more units sold.</p>
<p>With this companion graph, it is easier to cross-reference the price with the volume to better judge how representative of the market the unit prices are.</p>
</div>
</div>
</div>
</section>
<section id="generating-the-visualization-2" class="level3">
<h3 class="anchored" data-anchor-id="generating-the-visualization-2">4.4.3 Generating the visualization</h3>
<p>Finally, we will generate the visualization by stacking the 2 graphs and doing final touches on the styling and texts.</p>
<div class="cell">
<details>
<summary>Show ggplot2 code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>viz3 <span class="ot">&lt;-</span> (unit_price_by_prop_type <span class="sc">/</span> sales_volume_by_prop_type ) <span class="sc">+</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Singapore Private Property Sales by Property Type for 2024 Q1"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">subtitle =</span> <span class="st">"**Executive Condiminiums** sold at the lowest unit prices, while **Apartments** and **Condominiums** sold at the highest unit prices."</span>) <span class="sc">&amp;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Roboto Condensed"</span>),</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.location =</span> <span class="st">"plot"</span>,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>viz3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Insights
</div>
</div>
<div class="callout-body-container callout-body">
<p>From our initial exploration, we have already established that <strong>Executive Condominiums are cheapest</strong> in terms of unit price.</p>
<p>Another surprising observation is that despite having more <strong>Executive Condominiums</strong> sold, its boxplot is notably shorter compared to <strong>Detached</strong> and <strong>Semi-Detached</strong> Houses, in both the New Sale and Resale Markets. This disparity may be attributed to HDB’s price regulation on Executive Condominiums, resulting in reduced price variability compared to other property types.</p>
<p>It can also be observed that there are much fewer sales in the <strong>New Sales</strong> market of landed properties. It could be due to the fact that compared to Strata developments, Landed properties are usually bespoke to their owner’s use. In addition to the fact that landed properties are rare in Singapore, is it expected to see less New Sales in this category.</p>
<p>Lastly, the mean is higher than the median price which means that the unit prices are skewed towards the higher end of the scale. What this means it that prices tend to be more expensive than cheaper.</p>
</div>
</div>
</section>
</section>
</section>
<section id="summary" class="level1">
<h1>5 Summary</h1>
<section id="visualizations" class="level2">
<h2 class="anchored" data-anchor-id="visualizations">5.1 Visualizations</h2>
<p>For this exercise, we generated 3 visualizations, show below.</p>
<section id="singapore-private-property-prices-by-sales-market" class="level3">
<h3 class="anchored" data-anchor-id="singapore-private-property-prices-by-sales-market">5.1.1 Singapore Private Property Prices by Sales Market</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="districts-with-highest-units-sold-for-each-submarket" class="level3">
<h3 class="anchored" data-anchor-id="districts-with-highest-units-sold-for-each-submarket">5.1.2 Districts with Highest Units Sold for Each Submarket</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="singapore-private-property-sales-by-property-type-for-2024-q1" class="level3">
<h3 class="anchored" data-anchor-id="singapore-private-property-sales-by-property-type-for-2024-q1">5.1.3 Singapore Private Property Sales by Property Type for 2024 Q1</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="overall-insights" class="level2">
<h2 class="anchored" data-anchor-id="overall-insights">5.2 Overall Insights</h2>
<p>We found that the 2024 New Sales market experienced an sizable decrease is overall prices (7.6%) compared to the same period last year. However, it should be noted that this is due to <strong>New Launches located in cheaper districts</strong>, compared to the same period last year where that launches where in central districts like <strong>9 and 10</strong>.</p>
<p>Another very interesting insight is that different property prices experience big variations in prices, while <strong>Executive Condominiums</strong> have smaller variations. This is because of the more controlled and regulated environment as these properties are under the jurisdiction of HDB. This is why although median prices are at S$1736 in 2024Q1, it is possible to find a more affordable property when looking at Executive Condominiums.</p>
<p>Hence, a prospective buyer must take generalizations in the housing market with the grain of salt as overall market trends may not reflect the situation in the market they are interested in. This is why when thinking of buying a property, it is important to be more <strong>specific on the kind of property you are looking for</strong> (e.g.&nbsp;which district, property type, new or resale, etc) and narrow down on the trends for each of those. They must do their own due diligence in researching the market they are interested in to make a sound decision on their purchase.</p>
</section>
<section id="reflections" class="level2">
<h2 class="anchored" data-anchor-id="reflections">5.3 Reflections</h2>
<p>When choosing how to visualize the data, I had to make hard decisions on what data subsets to select. At first I was wary that I will be presenting misleading data. My own bias and limitations also reflect the output as I had to limit myself to looking at 2 quarters as I cannot imagine how to present data from all 5 quarters effectively with the level of detail in the different submarkets and property type.</p>
<p>However, I realized that with the details available to us, it is impossible to cover everything. It is more important to tailor the visualization to our target audience, and even then we may not be able to provide everything they need.</p>
<p>I am now more aware that as a data visualization consumer, I must do my on due diligence to dive deep into the details as the visualizations may be too general or too detailed for our own needs. Some data may be omitted or data due to various limitations.</p>
<p>As a student, there were also some frustrating moments as I wanted to present data in a certain way but my current abilities limit me from presenting data in such a way (especially on Visualization 2). As I progress in this course, I will challenge myself to implement those ideas as I expand my own learning.</p>
</section>
</section>
<section id="references" class="level1">
<h1>6 References</h1>
<p>99.co. (2024). New Launch Condos &amp; Projects in Singapore. <em>99.co</em>. <a href="https://www.99.co/singapore/new-launches" class="uri">https://www.99.co/singapore/new-launches</a></p>
<p>Holtz, Yan. (2024). Dealing with colors in ggplot2. <em>The R Graph Gallery</em>. <a href="https://r-graph-gallery.com/ggplot2-color.html" class="uri">https://r-graph-gallery.com/ggplot2-color.html</a></p>
<p>Housing &amp; Development Board. (2024). Executive Condominium. <em>Housing &amp; Development Board.</em> <a href="https://www.hdb.gov.sg/residential/buying-a-flat/executive-condominium" class="uri">https://www.hdb.gov.sg/residential/buying-a-flat/executive-condominium</a></p>
<p>Kam, Tin Seong. (2023). Visualising Distribution. <em>R for Visual Analytics.</em> <a href="https://r4va.netlify.app/chap09" class="uri">https://r4va.netlify.app/chap09</a></p>
<p>Lim, Abram. (2024). 13+ Housing &amp; Household Statistics in Singapore (2024).<em>SmartWealth Singapore</em>. <a href="https://smartwealth.sg/housing-household-statistics-singapore/" class="uri">https://smartwealth.sg/housing-household-statistics-singapore/</a></p>
<p>PropertyGuru Editorial Team. (2024). Singapore Property Market Outlook 2024 Overview. <em>PropertyGuru.</em> <a href="https://www.propertyguru.com.sg/property-guides/singapore-property-market-outlook-2024-90041#1" class="uri">https://www.propertyguru.com.sg/property-guides/singapore-property-market-outlook-2024-90041</a></p>
<p>Tan, Kylie. (2023). Take-home Exercise 1: Investigating Student Performance with Data Visualisations. <em>Kale’s Visual Analytics Tales.</em> <a href="https://akalestale.netlify.app/" class="uri">https://akalestale.netlify.app/</a></p>
<p>Trading Economics. (2024). <em>Home Ownership Rate | G20</em>. <a href="https://tradingeconomics.com/country-list/home-ownership-rate?continent=g20" class="uri">https://tradingeconomics.com/country-list/home-ownership-rate?continent=g20</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>