{
  "hash": "ec896f8fece081092605bb7f4bd6321e",
  "result": {
    "markdown": "---\ntitle: \"Take-home Exercise 2: DataVis Makeover\"\nauthor: \"Kristine Joy Paas\"\ndate: \"29 April 2024\"\ndate-modified: \"last-modified\"\nformat: html\nexecute: \n  echo: true\n  eval: true\n  warning: false\n  freeze: true\n---\n\n\n# 1 Overview\n\nFor this exercise, we will revisit [Take-home Exercise 1](Take-home_Exs/Ex1/Take-home_Ex1), where we visualized the trends in the Private Real Estate Market of Q1 2024.\n\nWe will critique a visualization from our [classmates](https://isss608-ay2023-24apr.netlify.app/take-home_ex/th_ex01#peer-learning) in terms of clarity and aesthetics and improve the visualizations using the best practices for visualizing data.\n\n# 2 The Original Visualization\n\nWe will use [Alicia Loh's](https://lnealicia-isss608.netlify.app/take-home_ex/take-home_ex01/take-home_ex01#composite-plot-1) visualization as the purpose is very clear from a glance. However, there are some points that we can improve to improve its clarity and aesthetics.\n\n![](images/visualization_for_critique.png){fig-align=\"center\"}\n\nThis visualization has higher clarity than aesthetic. The image below shows where this visualization in in the Clarity vs Aesthetic quadrant.\n\n![](images/quadrant.png){fig-align=\"center\" width=\"218\"}\n\n## 2.1 Critique\n\n::: panel-tabset\n### Clarify\n\n#### Good Points\n\n-   Purpose of the visualization is very easy at a glance. The purpose is to **compare Q1 Transacted Prices between 2023 and 2024**.\n\n-   Plots are shown side by side, with same range in the y-axis, which makes it **easy to compare** the values between the 2 plots.\n\n-   Use of **median reference line** for each year to see how the prices for each property time compare with the overall median.\n\n#### Points of Improvement\n\n-   Details are **lost in the scale**. Most of the values are less than \\$10M but it is hard to see the price distribution lower than this value.\n\n    -   Due to this, even if there is a median reference line, it is hard to see compare Apartment, Condominium, or Executive condo prices with this trend.\n\n-   No enlightening title to tell the story of the visualization.\n\n### Aesthetics\n\n#### Good Points\n\n-   Y-axis labels are easy to read, instead of the raw numbers, e.g. **40M** vs **40000000***.*\n\n-   No ticks on categorical axis (Property Type)\n\n-   Effort in using a theme for more professional look\n\n#### Points of Improvement\n\n-   Median labels cover the box plot.\n\n-   X-axis labels are rotated 90Â°, which make them hard to read\n\n-   Y-axis title (*Transacted Price*) is very close to the axis labels\n\n-   Difficult to compare the price difference for each property type\n\n    -   The reader needs to some context switching from the left to the right to compare\n:::\n\n## 2.2 Designing the Makeover\n\nThe sketch below shows illustrates the idea on how we can improve the visualization.\n\n![](images/sketch.jpg)\n\n**Note:** The y-axis will label the axis in millions, like the original plot.\n\n::: {.callout-tip appearance=\"minimal\"}\nThis is an initial design an we will iterative along the way using ggplot.\n:::\n\nThis design improves the visualization by:\n\n::: panel-tabset\n### Clarity\n\n-   Adding enlightening title and subtitle to the plot makes is easier for the reader to understand what is presented to them.\n\n-   Using **log10 scale** on the y-axis to show a wider range of values.\n\n### Aesthetics\n\n-   Plotting the 2023 and 2024 boxplots side by side to more easily compare prices for each property type. Muted and bright colors will be used for 2023 and 2024, respectively, to emphasize the 2024 plots.\n\n-   The previous point also provides more space to accommodate the x-axis labels. For longer titles, we will wrap them to the next time so they do not overlap with other labels.\n\n-   Place more focus on formatting the plots so the texts are using readable fonts and important details do not overlap each other.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, knitr, scales, patchwork, ggtext)\n```\n:::\n\n\nProposals\n\n-   Consider plotting the boxplots for 2023 and 2024 **side by side in the same plot**. This way, it is easier to compare the trend within the same property type across different quarters.\n\n-   Use log scale in y axis. However, compare to linear scale, it may be harder for humans to judge the values, so use more frequent tick marks.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrename_realis_column <- function(orig_name) {\n  # Add underscores to spaces\n  gsub(\" +\", \"_\",\n       # Remove special characters\n       gsub(\"[^A-Z ]\", \"\",\n            # Convert to upper case and remove trailing spaces\n            toupper(orig_name)) %>% trimws())\n}\n```\n:::\n\n\n::: panel-tabset\n## 2023Q1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis_2023q1 <- read_csv('data/ResidentialTransaction20240308160536.csv') %>%\n                  rename_with(rename_realis_column) %>% \n  mutate(QUARTER=\"2023Q1\")\nkable(head(realis_2023q1, n=7))\n```\n\n::: {.cell-output-display}\n|PROJECT_NAME            | TRANSACTED_PRICE| AREA_SQFT| UNIT_PRICE_PSF|SALE_DATE   |ADDRESS                       |TYPE_OF_SALE |TYPE_OF_AREA | AREA_SQM| UNIT_PRICE_PSM|NETT_PRICE |PROPERTY_TYPE         | NUMBER_OF_UNITS|TENURE                  |COMPLETION_DATE |PURCHASER_ADDRESS_INDICATOR |POSTAL_CODE |POSTAL_DISTRICT |POSTAL_SECTOR |PLANNING_REGION   |PLANNING_AREA |QUARTER |\n|:-----------------------|----------------:|---------:|--------------:|:-----------|:-----------------------------|:------------|:------------|--------:|--------------:|:----------|:---------------------|---------------:|:-----------------------|:---------------|:---------------------------|:-----------|:---------------|:-------------|:-----------------|:-------------|:-------|\n|THE REEF AT KING'S DOCK |          2317000|    882.65|           2625|01 Jan 2023 |12 HARBOURFRONT AVENUE #05-32 |New Sale     |Strata       |     82.0|          28256|-          |Condominium           |               1|99 yrs from 12/01/2021  |Uncompleted     |HDB                         |097996      |04              |09            |Central Region    |Bukit Merah   |2023Q1  |\n|URBAN TREASURES         |          1823500|    882.65|           2066|02 Jan 2023 |205 JALAN EUNOS #08-02        |New Sale     |Strata       |     82.0|          22238|-          |Condominium           |               1|Freehold                |Uncompleted     |Private                     |419535      |14              |41            |East Region       |Bedok         |2023Q1  |\n|NORTH GAIA              |          1421112|   1076.40|           1320|02 Jan 2023 |29 YISHUN CLOSE #08-10        |New Sale     |Strata       |    100.0|          14211|-          |Executive Condominium |               1|99 yrs from 15/02/2021  |Uncompleted     |HDB                         |269343      |27              |26            |North Region      |Yishun        |2023Q1  |\n|NORTH GAIA              |          1258112|   1033.34|           1218|02 Jan 2023 |45 YISHUN CLOSE #07-42        |New Sale     |Strata       |     96.0|          13105|-          |Executive Condominium |               1|99 yrs from 15/02/2021  |Uncompleted     |HDB                         |269294      |27              |26            |North Region      |Yishun        |2023Q1  |\n|PARC BOTANNIA           |          1280000|    871.88|           1468|03 Jan 2023 |12 FERNVALE STREET #06-16     |Resale       |Strata       |     81.0|          15802|-          |Condominium           |               1|99 yrs from 28/12/2016  |2022            |HDB                         |797391      |28              |79            |North East Region |Sengkang      |2023Q1  |\n|NANYANG PARK            |          5870000|   3322.85|           1767|03 Jan 2023 |72 JALAN LIMBOK               |Resale       |Land         |    308.7|          19015|-          |Terrace House         |               1|999 yrs from 14/02/1881 |-               |Private                     |548742      |19              |54            |North East Region |Hougang       |2023Q1  |\n|PALMS @ SIXTH AVENUE    |          4950000|   4520.88|           1095|03 Jan 2023 |231 SIXTH AVENUE              |Resale       |Strata       |    420.0|          11786|-          |Semi-Detached House   |               1|Freehold                |2015            |Private                     |275780      |10              |27            |Central Region    |Bukit Timah   |2023Q1  |\n:::\n:::\n\n\n## 2024Q1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis_2024q1 <- read_csv('data/ResidentialTransaction20240414220633.csv') %>%\n                  rename_with(rename_realis_column) %>% \n  mutate(QUARTER=\"2024Q1\")\nkable(head(realis_2024q1, n=7))\n```\n\n::: {.cell-output-display}\n|PROJECT_NAME           | TRANSACTED_PRICE| AREA_SQFT| UNIT_PRICE_PSF|SALE_DATE   |ADDRESS                     |TYPE_OF_SALE |TYPE_OF_AREA | AREA_SQM| UNIT_PRICE_PSM|NETT_PRICE |PROPERTY_TYPE | NUMBER_OF_UNITS|TENURE                 |COMPLETION_DATE |PURCHASER_ADDRESS_INDICATOR |POSTAL_CODE |POSTAL_DISTRICT |POSTAL_SECTOR |PLANNING_REGION   |PLANNING_AREA |QUARTER |\n|:----------------------|----------------:|---------:|--------------:|:-----------|:---------------------------|:------------|:------------|--------:|--------------:|:----------|:-------------|---------------:|:----------------------|:---------------|:---------------------------|:-----------|:---------------|:-------------|:-----------------|:-------------|:-------|\n|THE LANDMARK           |          2726888|   1076.40|           2533|01 Jan 2024 |173 CHIN SWEE ROAD #22-11   |New Sale     |Strata       |      100|          27269|-          |Condominium   |               1|99 yrs from 28/08/2020 |Uncompleted     |Private                     |169878      |03              |16            |Central Region    |Outram        |2024Q1  |\n|POLLEN COLLECTION      |          3850000|   1808.35|           2129|01 Jan 2024 |34 POLLEN PLACE             |New Sale     |Land         |      168|          22917|-          |Terrace House |               1|99 yrs from 09/12/2019 |Uncompleted     |N.A                         |807233      |28              |80            |North East Region |Serangoon     |2024Q1  |\n|SKY EDEN@BEDOK         |          2346000|   1087.16|           2158|01 Jan 2024 |1 BEDOK CENTRAL #09-10      |New Sale     |Strata       |      101|          23228|-          |Apartment     |               1|99 yrs from 05/01/2022 |Uncompleted     |HDB                         |469657      |16              |46            |East Region       |Bedok         |2024Q1  |\n|TERRA HILL             |          2190000|    807.30|           2713|01 Jan 2024 |18A YEW SIANG ROAD #03-12   |New Sale     |Strata       |       75|          29200|-          |Apartment     |               1|Freehold               |Uncompleted     |N.A                         |118992      |05              |11            |Central Region    |Queenstown    |2024Q1  |\n|PINETREE HILL          |          1954000|    796.54|           2453|01 Jan 2024 |36 PINE GROVE #05-18        |New Sale     |Strata       |       74|          26405|-          |Condominium   |               1|99 yrs from 12/09/2022 |Uncompleted     |Private                     |598444      |21              |59            |Central Region    |Bukit Timah   |2024Q1  |\n|THE RESERVE RESIDENCES |          3412201|   1323.97|           2577|01 Jan 2024 |13 JALAN ANAK BUKIT #28-106 |New Sale     |Strata       |      123|          27741|-          |Apartment     |               1|99 yrs from 29/11/2021 |Uncompleted     |Private                     |589605      |21              |58            |Central Region    |Bukit Timah   |2024Q1  |\n|SUMMER VILLAS          |          2960000|   3530.59|            838|02 Jan 2024 |73 GERALD DRIVE #01-06      |Resale       |Strata       |      328|           9024|-          |Terrace House |               1|Freehold               |2004            |Private                     |797703      |28              |79            |North East Region |Hougang       |2024Q1  |\n:::\n:::\n\n\n## Combining\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis <- realis_2023q1 %>%\n  rbind(realis_2024q1) %>%\n  select(c(\n    QUARTER,\n    PROPERTY_TYPE,\n    TRANSACTED_PRICE\n  ))\nkable(head(realis, 10))\n```\n\n::: {.cell-output-display}\n|QUARTER |PROPERTY_TYPE         | TRANSACTED_PRICE|\n|:-------|:---------------------|----------------:|\n|2023Q1  |Condominium           |          2317000|\n|2023Q1  |Condominium           |          1823500|\n|2023Q1  |Executive Condominium |          1421112|\n|2023Q1  |Executive Condominium |          1258112|\n|2023Q1  |Condominium           |          1280000|\n|2023Q1  |Terrace House         |          5870000|\n|2023Q1  |Semi-Detached House   |          4950000|\n|2023Q1  |Terrace House         |          3260000|\n|2023Q1  |Apartment             |           850000|\n|2023Q1  |Executive Condominium |          1268000|\n:::\n:::\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis <- realis %>% mutate(PRICE_IN_MILLIONS = TRANSACTED_PRICE/1000000)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian2023 = median(realis_2023q1$TRANSACTED_PRICE) / 1000000\nmedian2024 = median(realis_2024q1$TRANSACTED_PRICE) / 1000000\nggplot(realis, aes(y = PRICE_IN_MILLIONS, x = PROPERTY_TYPE, fill = QUARTER, color = QUARTER)) +\n  \n  geom_hline(yintercept = median2023, color = \"2023\", linetype = \"dashed\") +\n  annotate(\"text\", label = paste0(\"Median =\\n$\", round(median2023, 2), \"M\"), y = median2023 * 0.7, x = 6.75, color = \"2023\", size = 3, family = \"Roboto Condensed\") +\n  \n  geom_hline(yintercept = median2024, color = \"blue\", linetype = \"dashed\") +\n  annotate(\"text\", label = paste0(\"Median =\\n$\", round(median2024, 2), \"M\"), y = median2024 * 1.4, x = 6.75, color = \"blue\", size = 3, family = \"Roboto Condensed\") +\n  \n  geom_boxplot(alpha = 0.6, staplewidth=0.3, outlier.alpha = 0.8, outlier.size = 0.25) +\n  \n  scale_color_manual(values = c(\"grey60\", \"blue\")) +\n  scale_fill_manual(values = c(\"grey60\", \"blue\")) +\n  scale_y_log10(limits = c(0.5, 60)) +\n  scale_x_discrete(labels = wrap_format(10), expand = expansion(add = c(0.6, 1))) +\n  labs(y = \"Transacted Price (in million $)\", x=\"Property Type\", fill = \"Quarter\", color = \"Quarter\") +\n  theme_minimal() +\n  plot_annotation(\n    title = \"Transaction Prices by Property Type\",\n    subtitle = \"Overall prices have increased by **3.7%** from $1.63M to $1.69M. However, the price variability for all property types<br/>have decreased, with fewer outliers present.\"\n  ) &\n  theme(\n    text = element_text(family = \"Roboto Condensed\"),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_markdown(color = \"grey50\", size = rel(0.9)),\n    axis.line.x = element_line(),\n    legend.position = \"inside\",\n    legend.position.inside = c(1, 0.9),\n    legend.justification = \"right\",\n    legend.location = \"plot\",\n    legend.direction = \"horizontal\",\n    legend.box.background = element_rect(fill=\"aliceblue\")\n  )\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n<https://isss608-ay2023-24apr.netlify.app/lesson/lesson02/lesson02-designing%20graphs%20to%20enlighten#/title-slide>\n",
    "supporting": [
      "Take-home_Ex2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}