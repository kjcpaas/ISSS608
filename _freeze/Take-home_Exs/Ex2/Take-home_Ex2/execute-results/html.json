{
  "hash": "1a6e5ec3a15db9f77acf0442a01bd02b",
  "result": {
    "markdown": "---\ntitle: \"Take-home Exercise 2: DataVis Makeover\"\nauthor: \"Kristine Joy Paas\"\ndate: \"29 April 2024\"\ndate-modified: \"last-modified\"\nformat: html\nexecute: \n  echo: true\n  eval: true\n  warning: false\n  freeze: true\n---\n\n\n# 1 Overview\n\nFor this exercise, we will revisit [Take-home Exercise 1](Take-home_Exs/Ex1/Take-home_Ex1), where we visualized the trends in the Private Real Estate Market of Q1 2024.\n\nWe will critique a visualization from our [classmates](https://isss608-ay2023-24apr.netlify.app/take-home_ex/th_ex01#peer-learning) in terms of clarity and aesthetics and improve the visualizations using the best practices for visualizing data.\n\n# 2 The Original Visualization\n\nWe will use [Alicia Loh's](https://lnealicia-isss608.netlify.app/take-home_ex/take-home_ex01/take-home_ex01#composite-plot-1) visualization as the purpose is very clear from a glance. However, there are some points that we can improve to improve its clarity and aesthetics.\n\n![](images/visualization_for_critique.png){fig-align=\"center\"}\n\nThis visualization has higher clarity than aesthetic. The image below shows where this visualization in in the Clarity vs Aesthetic quadrant.\n\n![](images/quadrant.png){fig-align=\"center\" width=\"218\"}\n\n## 2.1 Critique\n\n::: panel-tabset\n### Clarify\n\n#### Good Points\n\n-   Purpose of the visualization is very easy at a glance. The purpose is to **compare Q1 Transacted Prices between 2023 and 2024**.\n\n-   Plots are shown side by side, with same range in the y-axis, which makes it **easy to compare** the values between the 2 plots.\n\n-   Use of **median reference line** for each year to see how the prices for each property time compare with the overall median.\n\n#### Points of Improvement\n\n-   Details are **lost in the scale**. Most of the values are less than \\$10M but it is hard to see the price distribution lower than this value.\n\n    -   Due to this, even if there is a median reference line, it is hard to see compare Apartment, Condominium, or Executive condo prices with this trend.\n\n-   No enlightening title to tell the story of the visualization.\n\n### Aesthetics\n\n#### Good Points\n\n-   Y-axis labels are easy to read, instead of the raw numbers, e.g. **40M** vs **40000000***.*\n\n-   No ticks on categorical axis (Property Type)\n\n-   Effort in using a theme for more professional look\n\n#### Points of Improvement\n\n-   Median labels cover the box plot.\n\n-   X-axis labels are rotated 90Â°, which make them hard to read\n\n-   Y-axis title (*Transacted Price*) is very close to the axis labels\n\n-   Difficult to compare the price difference for each property type\n\n    -   The reader needs to some context switching from the left to the right to compare\n:::\n\n## 2.2 Designing the Makeover\n\nThe sketch below shows illustrates the idea on how we can improve the visualization.\n\n![](images/sketch.jpg)\n\n**Note:** The y-axis will label the axis in millions, like the original plot.\n\nThis design improves the visualization by:\n\n::: panel-tabset\n### Clarity\n\n-   Adding enlightening title and subtitle to the plot makes is easier for the reader to understand what is presented to them.\n\n-   Using **log10 scale** on the y-axis to show a wider range of values.\n\n### Aesthetics\n\n-   Plotting the 2023 and 2024 boxplots side by side to more easily compare prices for each property type. Muted and bright colors will be used for 2023 and 2024, respectively, to emphasize the 2024 plots.\n\n-   The previous point also provides more space to accommodate the x-axis labels. For longer titles, we will wrap them to the next time so they do not overlap with other labels.\n\n-   Place more focus on formatting the plots so the texts are using readable fonts and important details do not overlap each other.\n\n-   Remove the *Property Type* in the x-axis title as the plot title and subtitle is already clear on what we are comparing. Removing the title gives more focus on the property types themselves.\n:::\n\n# 3 Makeover Preparations\n\nBefore we proceed with the makeover, we need to prepare the R environment and the data.\n\n## 3.1 Loading the R packages\n\nWe will mainly use the following packages for the makeover:\n\n-   [tidyverse](https://www.tidyverse.org/): A collection of R packages used in data science, which includes [ggplot2](https://ggplot2.tidyverse.org/), [tibble](https://tibble.tidyverse.org/), [readr](https://readr.tidyverse.org/), among others\n-   [ggtext](https://wilkelab.org/ggtext/): Enhances text rendering for `ggplot2`. `element_markdown()` is most notable function used for markdown rendering so we can highlight important information in text.\n-   [patchwork](https://patchwork.data-imaginist.com/): Allows composition of multiple graphs into a single plot\n-   [scales](https://scales.r-lib.org/): Extends functions to operate on `ggplot2` scales. Useful for wrapping text and formatting numbers in axes.\n-   [DT](https://rstudio.github.io/DT/): To display tabular data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, scales, patchwork, ggtext, DT)\n```\n:::\n\n\n## 3.2 Importing the datases\n\nWe will import only the **2023Q1** and **2024Q1** datasets as the visualization only involves those quarters.\n\nWhen loading the dataset, we will also rename the columns to R-friendly format. For this purpose, we will reuse the `rename_realis_column` function from [Take-home Exercise 1](httpsTake-home_Exs/Ex1/Take-home_Ex1#importing-the-datasets).\n\nFor each dataset, we will also align the corresponding quarter in the `QUARTER` column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrename_realis_column <- function(orig_name) {\n  # Add underscores to spaces\n  gsub(\" +\", \"_\",\n       # Remove special characters\n       gsub(\"[^A-Z ]\", \"\",\n            # Convert to upper case and remove trailing spaces\n            toupper(orig_name)) %>% trimws())\n}\n```\n:::\n\n\n::: panel-tabset\n### 2023Q1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis_2023q1 <-\n  read_csv('data/ResidentialTransaction20240308160536.csv') %>%\n  rename_with(rename_realis_column)\ndatatable(head(realis_2023q1, n = 20))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-604ba40d3cc8819255b4\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-604ba40d3cc8819255b4\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[\"THE REEF AT KING'S DOCK\",\"URBAN TREASURES\",\"NORTH GAIA\",\"NORTH GAIA\",\"PARC BOTANNIA\",\"NANYANG PARK\",\"PALMS @ SIXTH AVENUE\",\"N.A.\",\"WHISTLER GRAND\",\"NORTHOAKS\",\"AMBER PARK\",\"THE GAZANIA\",\"WILSHIRE RESIDENCES\",\"WILSHIRE RESIDENCES\",\"PARC CLEMATIS\",\"MOOI RESIDENCES\",\"TENET\",\"TENET\",\"FRANKEL ESTATE\",\"THE URBANITE\"],[2317000,1823500,1421112,1258112,1280000,5870000,4950000,3260000,850000,1268000,1888000,1477000,1990000,1975000,2735000,3288888,1224000,1534000,6765000,1470000],[882.65,882.65,1076.4,1033.34,871.88,3322.85,4520.88,1555.4,441.32,1603.84,678.13,635.08,753.48,742.72,1463.9,1280.92,925.7,1108.69,3962.23,1173.28],[2625,2066,1320,1218,1468,1767,1095,2096,1926,791,2784,2326,2641,2659,1868,2568,1322,1384,1707,1253],[\"01 Jan 2023\",\"02 Jan 2023\",\"02 Jan 2023\",\"02 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\",\"03 Jan 2023\"],[\"12 HARBOURFRONT AVENUE #05-32\",\"205 JALAN EUNOS #08-02\",\"29 YISHUN CLOSE #08-10\",\"45 YISHUN CLOSE #07-42\",\"12 FERNVALE STREET #06-16\",\"72 JALAN LIMBOK\",\"231 SIXTH AVENUE\",\"19 TENG TONG ROAD\",\"107 WEST COAST VALE #30-04\",\"30 WOODLANDS CRESCENT #01-11\",\"16 AMBER GARDENS #04-08\",\"5 HOW SUN DRIVE #04-08\",\"30 FARRER ROAD #05-03\",\"30 FARRER ROAD #06-05\",\"6A JALAN LEMPENG #13-05\",\"139 HOLLAND ROAD #05-01\",\"73 TAMPINES STREET 62 #07-06\",\"73 TAMPINES STREET 62 #02-08\",\"72A FRANKEL AVENUE\",\"29 HERTFORD ROAD #05-02\"],[\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"Resale\",\"Resale\",\"Resale\",\"Resale\",\"Sub Sale\",\"Resale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"Resale\",\"Resale\"],[\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Land\",\"Strata\",\"Land\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Land\",\"Strata\"],[82,82,100,96,81,308.7,420,144.5,41,149,63,59,70,69,136,119,86,103,368.1,109],[28256,22238,14211,13105,15802,19015,11786,22561,20732,8510,29968,25034,28429,28623,20110,27638,14233,14893,18378,13486],[\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\"],[\"Condominium\",\"Condominium\",\"Executive Condominium\",\"Executive Condominium\",\"Condominium\",\"Terrace House\",\"Semi-Detached House\",\"Terrace House\",\"Apartment\",\"Executive Condominium\",\"Condominium\",\"Condominium\",\"Apartment\",\"Apartment\",\"Apartment\",\"Apartment\",\"Executive Condominium\",\"Executive Condominium\",\"Semi-Detached House\",\"Apartment\"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[\"99 yrs from 12/01/2021\",\"Freehold\",\"99 yrs from 15/02/2021\",\"99 yrs from 15/02/2021\",\"99 yrs from 28/12/2016\",\"999 yrs from 14/02/1881\",\"Freehold\",\"Freehold\",\"99 yrs from 07/05/2018\",\"99 yrs from 16/12/1997\",\"Freehold\",\"Freehold\",\"Freehold\",\"Freehold\",\"99 yrs from 08/08/2019\",\"Freehold\",\"99 yrs from 01/11/2021\",\"99 yrs from 01/11/2021\",\"Freehold\",\"Freehold\"],[\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"2022\",\"-\",\"2015\",\"1941\",\"2022\",\"2000\",\"Uncompleted\",\"2022\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"1958\",\"2014\"],[\"HDB\",\"Private\",\"HDB\",\"HDB\",\"HDB\",\"Private\",\"Private\",\"Private\",\"HDB\",\"HDB\",\"HDB\",\"Private\",\"Private\",\"HDB\",\"N.A\",\"N.A\",\"HDB\",\"Private\",\"Private\",\"HDB\"],[\"097996\",\"419535\",\"269343\",\"269294\",\"797391\",\"548742\",\"275780\",\"423510\",\"126751\",\"738086\",\"439961\",\"538527\",\"268832\",\"268832\",\"128822\",\"278573\",\"529700\",\"529700\",\"458202\",\"219384\"],[\"04\",\"14\",\"27\",\"27\",\"28\",\"19\",\"10\",\"15\",\"05\",\"25\",\"15\",\"19\",\"10\",\"10\",\"05\",\"10\",\"18\",\"18\",\"15\",\"08\"],[\"09\",\"41\",\"26\",\"26\",\"79\",\"54\",\"27\",\"42\",\"12\",\"73\",\"43\",\"53\",\"26\",\"26\",\"12\",\"27\",\"52\",\"52\",\"45\",\"21\"],[\"Central Region\",\"East Region\",\"North Region\",\"North Region\",\"North East Region\",\"North East Region\",\"Central Region\",\"Central Region\",\"West Region\",\"North Region\",\"Central Region\",\"North East Region\",\"Central Region\",\"Central Region\",\"West Region\",\"Central Region\",\"East Region\",\"East Region\",\"East Region\",\"Central Region\"],[\"Bukit Merah\",\"Bedok\",\"Yishun\",\"Yishun\",\"Sengkang\",\"Hougang\",\"Bukit Timah\",\"Marine Parade\",\"Clementi\",\"Woodlands\",\"Marine Parade\",\"Serangoon\",\"Tanglin\",\"Tanglin\",\"Clementi\",\"Bukit Timah\",\"Tampines\",\"Tampines\",\"Bedok\",\"Kallang\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>PROJECT_NAME<\\/th>\\n      <th>TRANSACTED_PRICE<\\/th>\\n      <th>AREA_SQFT<\\/th>\\n      <th>UNIT_PRICE_PSF<\\/th>\\n      <th>SALE_DATE<\\/th>\\n      <th>ADDRESS<\\/th>\\n      <th>TYPE_OF_SALE<\\/th>\\n      <th>TYPE_OF_AREA<\\/th>\\n      <th>AREA_SQM<\\/th>\\n      <th>UNIT_PRICE_PSM<\\/th>\\n      <th>NETT_PRICE<\\/th>\\n      <th>PROPERTY_TYPE<\\/th>\\n      <th>NUMBER_OF_UNITS<\\/th>\\n      <th>TENURE<\\/th>\\n      <th>COMPLETION_DATE<\\/th>\\n      <th>PURCHASER_ADDRESS_INDICATOR<\\/th>\\n      <th>POSTAL_CODE<\\/th>\\n      <th>POSTAL_DISTRICT<\\/th>\\n      <th>POSTAL_SECTOR<\\/th>\\n      <th>PLANNING_REGION<\\/th>\\n      <th>PLANNING_AREA<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,3,4,9,10,13]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n### 2024Q1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis_2024q1 <-\n  read_csv('data/ResidentialTransaction20240414220633.csv') %>%\n  rename_with(rename_realis_column)\ndatatable(head(realis_2024q1, n = 20))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-32d2e6726ac17b72d18f\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-32d2e6726ac17b72d18f\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[\"THE LANDMARK\",\"POLLEN COLLECTION\",\"SKY EDEN@BEDOK\",\"TERRA HILL\",\"PINETREE HILL\",\"THE RESERVE RESIDENCES\",\"SUMMER VILLAS\",\"THE MINTON\",\"SEMBAWANG HILLS ESTATE\",\"NV RESIDENCES\",\"SANT RITZ\",\"ECOPOLITAN\",\"AFFINITY AT SERANGOON\",\"PARC KOMO\",\"TREASURE CREST\",\"ECO\",\"SIXTH AVENUE CENTRE\",\"NOMA\",\"PARC CLEMATIS\",\"MARINA BAY RESIDENCES\"],[2726888,3850000,2346000,2190000,1954000,3412201,2960000,1840000,4200000,1350000,890000,1390000,1938000,1758000,1790000,1620000,1935000,1500000,1990000,1420000],[1076.4,1808.35,1087.16,807.3,796.54,1323.97,3530.59,1216.33,2092.52,1108.69,527.4399999999999,1097.93,1173.28,1001.05,1248.62,990.2900000000001,1173.28,850.3599999999999,904.1800000000001,710.42],[2533,2129,2158,2713,2453,2577,838,1513,2007,1218,1687,1266,1652,1756,1434,1636,1649,1764,2201,1999],[\"01 Jan 2024\",\"01 Jan 2024\",\"01 Jan 2024\",\"01 Jan 2024\",\"01 Jan 2024\",\"01 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\",\"02 Jan 2024\"],[\"173 CHIN SWEE ROAD #22-11\",\"34 POLLEN PLACE\",\"1 BEDOK CENTRAL #09-10\",\"18A YEW SIANG ROAD #03-12\",\"36 PINE GROVE #05-18\",\"13 JALAN ANAK BUKIT #28-106\",\"73 GERALD DRIVE #01-06\",\"6 HOUGANG STREET 11 #11-09\",\"67 JALAN CHENGAM\",\"99 PASIR RIS GROVE #08-47\",\"1 PHENG GECK AVENUE #06-24\",\"134 PUNGGOL WALK #07-21\",\"20 SERANGOON NORTH AVENUE 1 #01-20\",\"959 UPPER CHANGI ROAD NORTH #05-65\",\"54 ANCHORVALE CRESCENT #05-15\",\"275 BEDOK SOUTH AVENUE 3 #01-22\",\"805 BUKIT TIMAH ROAD #04-03\",\"333 GUILLEMARD ROAD #02-04\",\"8 JALAN LEMPENG #09-16\",\"18 MARINA BOULEVARD #26-04\"],[\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"New Sale\",\"Resale\",\"Resale\",\"Resale\",\"Resale\",\"Resale\",\"Resale\",\"Sub Sale\",\"Sub Sale\",\"Resale\",\"Resale\",\"Resale\",\"Sub Sale\",\"Sub Sale\",\"Resale\"],[\"Strata\",\"Land\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Land\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\",\"Strata\"],[100,168,101,75,74,123,328,113,194.4,103,49,102,109,93,116,92,109,79,84,66],[27269,22917,23228,29200,26405,27741,9024,16283,21605,13107,18163,13627,17780,18903,15431,17609,17752,18987,23690,21515],[\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\",\"-\"],[\"Condominium\",\"Terrace House\",\"Apartment\",\"Apartment\",\"Condominium\",\"Apartment\",\"Terrace House\",\"Condominium\",\"Terrace House\",\"Condominium\",\"Condominium\",\"Executive Condominium\",\"Apartment\",\"Apartment\",\"Executive Condominium\",\"Condominium\",\"Apartment\",\"Apartment\",\"Apartment\",\"Condominium\"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[\"99 yrs from 28/08/2020\",\"99 yrs from 09/12/2019\",\"99 yrs from 05/01/2022\",\"Freehold\",\"99 yrs from 12/09/2022\",\"99 yrs from 29/11/2021\",\"Freehold\",\"99 yrs from 27/07/2007\",\"Freehold\",\"99 yrs from 07/01/2008\",\"99 yrs from 01/10/2012\",\"99 yrs from 04/12/2012\",\"99 yrs from 18/05/2018\",\"Freehold\",\"99 yrs from 05/05/2015\",\"99 yrs from 14/05/2012\",\"Freehold\",\"Freehold\",\"99 yrs from 08/08/2019\",\"99 yrs from 11/10/2005\"],[\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"Uncompleted\",\"2004\",\"2013\",\"2015\",\"2013\",\"2016\",\"2016\",\"2023\",\"2023\",\"2018\",\"2017\",\"1986\",\"2023\",\"2023\",\"2010\"],[\"Private\",\"N.A\",\"HDB\",\"N.A\",\"Private\",\"Private\",\"Private\",\"HDB\",\"Private\",\"HDB\",\"HDB\",\"HDB\",\"HDB\",\"Private\",\"Private\",\"Private\",\"Private\",\"Private\",\"HDB\",\"HDB\"],[\"169878\",\"807233\",\"469657\",\"118992\",\"598444\",\"589605\",\"797703\",\"538755\",\"578350\",\"518194\",\"348196\",\"828778\",\"554337\",\"506787\",\"544631\",\"465491\",\"279883\",\"399758\",\"128796\",\"018980\"],[\"03\",\"28\",\"16\",\"05\",\"21\",\"21\",\"28\",\"19\",\"20\",\"18\",\"13\",\"19\",\"19\",\"17\",\"19\",\"16\",\"10\",\"14\",\"05\",\"01\"],[\"16\",\"80\",\"46\",\"11\",\"59\",\"58\",\"79\",\"53\",\"57\",\"51\",\"34\",\"82\",\"55\",\"50\",\"54\",\"46\",\"27\",\"39\",\"12\",\"01\"],[\"Central Region\",\"North East Region\",\"East Region\",\"Central Region\",\"Central Region\",\"Central Region\",\"North East Region\",\"North East Region\",\"North East Region\",\"East Region\",\"Central Region\",\"North East Region\",\"North East Region\",\"East Region\",\"North East Region\",\"East Region\",\"Central Region\",\"Central Region\",\"West Region\",\"Central Region\"],[\"Outram\",\"Serangoon\",\"Bedok\",\"Queenstown\",\"Bukit Timah\",\"Bukit Timah\",\"Hougang\",\"Hougang\",\"Ang Mo Kio\",\"Pasir Ris\",\"Toa Payoh\",\"Punggol\",\"Serangoon\",\"Pasir Ris\",\"Sengkang\",\"Bedok\",\"Bukit Timah\",\"Geylang\",\"Clementi\",\"Downtown Core\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>PROJECT_NAME<\\/th>\\n      <th>TRANSACTED_PRICE<\\/th>\\n      <th>AREA_SQFT<\\/th>\\n      <th>UNIT_PRICE_PSF<\\/th>\\n      <th>SALE_DATE<\\/th>\\n      <th>ADDRESS<\\/th>\\n      <th>TYPE_OF_SALE<\\/th>\\n      <th>TYPE_OF_AREA<\\/th>\\n      <th>AREA_SQM<\\/th>\\n      <th>UNIT_PRICE_PSM<\\/th>\\n      <th>NETT_PRICE<\\/th>\\n      <th>PROPERTY_TYPE<\\/th>\\n      <th>NUMBER_OF_UNITS<\\/th>\\n      <th>TENURE<\\/th>\\n      <th>COMPLETION_DATE<\\/th>\\n      <th>PURCHASER_ADDRESS_INDICATOR<\\/th>\\n      <th>POSTAL_CODE<\\/th>\\n      <th>POSTAL_DISTRICT<\\/th>\\n      <th>POSTAL_SECTOR<\\/th>\\n      <th>PLANNING_REGION<\\/th>\\n      <th>PLANNING_AREA<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,3,4,9,10,13]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n:::\n\n## 3.3 Data Wrangling\n\nNow that we have `realis_2023q1` and `realis_2024q1`, we will combine them into a form that is usable for the make over.\n\n### 3.3.1 Adding QUARTER columns\n\nWe will use `mutate()` to assign the corresponding quater to each dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis_2023q1$QUARTER <- \"2023Q1\"\nrealis_2024q1$QUARTER <- \"2024Q1\"\n```\n:::\n\n\n### 3.3.2 Combining the dataframes\n\nWe will combine the dataframes to a single one using `rbind()`, so that we only need to work with a single dataframe for the makeover.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis <- rbind(realis_2023q1, realis_2024q1)\n```\n:::\n\n\n### 3.3.3 Selecting relevant columns\n\nLastly, we will select only the columns relevant to the visualization (`QUARTER`, `PROPERTY_TYPE`, `TRANSACTED_PRICE`) to make our dataframe more lightweight.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrealis <- realis %>% select(c(QUARTER,\n                              PROPERTY_TYPE,\n                              TRANSACTED_PRICE))\ndatatable(head(realis, 20))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-69e6ce5b87080d7c3bb7\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-69e6ce5b87080d7c3bb7\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\",\"2023Q1\"],[\"Condominium\",\"Condominium\",\"Executive Condominium\",\"Executive Condominium\",\"Condominium\",\"Terrace House\",\"Semi-Detached House\",\"Terrace House\",\"Apartment\",\"Executive Condominium\",\"Condominium\",\"Condominium\",\"Apartment\",\"Apartment\",\"Apartment\",\"Apartment\",\"Executive Condominium\",\"Executive Condominium\",\"Semi-Detached House\",\"Apartment\"],[2317000,1823500,1421112,1258112,1280000,5870000,4950000,3260000,850000,1268000,1888000,1477000,1990000,1975000,2735000,3288888,1224000,1534000,6765000,1470000]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>QUARTER<\\/th>\\n      <th>PROPERTY_TYPE<\\/th>\\n      <th>TRANSACTED_PRICE<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nWe now have all the data we need in `realis`.\n\n# 4 The Makeover\n\n## 4.1 Implementing the design\n\nIn [2.2 Designing the Makeover], we came up with a design to improve the original visualization. We will use this as a starting point for the makeover.\n\nWe are getting the plot title and subtitle by extracting from the write-up in the original visualization.\n\nWe also need to calculate the medians for the reference lines:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian2023 = median(realis_2023q1$TRANSACTED_PRICE)\nmedian2024 = median(realis_2024q1$TRANSACTED_PRICE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(realis,\n       aes(\n         y = TRANSACTED_PRICE,\n         x = PROPERTY_TYPE,\n         fill = QUARTER,\n         color = QUARTER\n       )) +\n  \n  # Renders colored outliers and box border\n  geom_boxplot(\n    aes(fill = NULL),\n    outlier.alpha = 0.8,\n    outlier.size = 0.2,\n    show.legend = FALSE\n  ) +\n  # Renders without outliers to override the colored borders from previous box plot\n  # Staples are rendered so it is clearer where the outliers start\n  geom_boxplot(\n    alpha = 0.8,\n    staplewidth = 0.2,\n    outliers = FALSE,\n    color = \"black\"\n  ) +\n  \n  # 2023 Median reference line\n  geom_hline(yintercept = median2023,\n             color = \"grey60\",\n             linetype = \"dashed\") +\n  annotate(\n    \"text\",\n    label = paste0(\"Median =\\n$\", round(median2023 / 1e6, 2), \"M\"),\n    y = median2023 * 0.7,\n    x = 6.75,\n    color = \"grey50\",\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # 2024 Median reference line\n  geom_hline(yintercept = median2024,\n             color = \"blue\",\n             linetype = \"dashed\") +\n  annotate(\n    \"text\",\n    label = paste0(\"Median =\\n$\", round(median2024 / 1e6, 2), \"M\"),\n    y = median2024 * 1.4,\n    x = 6.75,\n    color = \"blue\",\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # Set colors\n  scale_fill_manual(values = c(\"grey60\", \"blue\")) +\n  scale_color_manual(values = c(\"grey60\", \"blue\")) +\n  \n  # Format axes\n  scale_y_log10(limits = c(0.5e6, 70e6),\n                labels = number_format(scale = 1e-6, suffix = \"M\")) +\n  scale_x_discrete(labels = wrap_format(10), expand = expansion(add = c(0.6, 1))) +\n  labs(x = \"Property Type\",\n       y = \"Transacted Price ($)\",\n       fill = \"Quarter\") +\n  \n  # Plot styles\n  theme_minimal() +\n  plot_annotation(title = \"Transaction Prices by Property Type for 2023Q1 & 2024Q1\",\n                  subtitle = \"Overall prices have increased by **3.7%** from $1.63M to $1.69M. However, the price variability for all property types<br/>have decreased, with fewer outliers present.\") &\n  theme(\n    text = element_text(family = \"Roboto Condensed\"),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_markdown(color = \"grey50\", size = rel(0.9)),\n    axis.line.x = element_line(),\n    axis.title.x = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n::: panel-tabset\n### Gains\n\nPlotting the boxplots in pairs improved the clarity of the visualization as it makes it easier to compare prices within each property type. Using a bright color like blue for the 2024 plot and a muted color like gray for the 2023 plot places the focus towards the 2024 data during the comparison.\n\nThe theme and the styles applied greatly improved the readability, especially as the x-axis labels are now rendered horizontally. This also provided a bigger space for the plot itself.\n\nLastly, the title and subtitle provides a story for the visualization to help the reader understand what is presented to them.\n\n### Points for improvement\n\nWhile the makeover made the visualization more aesthetic further improvements can be made:\n\n-   Free up more space on the right by moving the legend to inside the plot. This will help expand the plot horizontally.\n\n-   Make the x-axis labels a bit bigger. As we removed the title, *Property Type*, the balance of the text sizes between the x and y axes seem off. A larger text will also make it easier to read.\n\n-   Reference lines are hard to see when overlapping with boxplots. It is hard to compare with the reference lines especially for `Apartment` and `Condominium` as the color of the reference lines are the same as the fill.\n\n-   Add axis line and ticks to y-axis as it is a continuous value\n\n-   If possible, add more values in y-axis labels as log scale is more difficult to judge than a linear scale. For example, we **cannot see the values above \\$30M**.\n:::\n\n## 4.2 2nd Iteration\n\nFrom the points of improvement of the initial makeover, we will do the following:\n\n-   Move the legend to inside the plot\n\n-   Increase size of x-axis labels\n\n-   Adjust y-axis style and labels\n\n-   Tweak the presentation of the reference lines\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(realis,\n       aes(\n         y = TRANSACTED_PRICE,\n         x = PROPERTY_TYPE,\n         fill = QUARTER,\n         color = QUARTER\n       )) +\n  \n  # Renders colored outliers and box border\n  geom_boxplot(\n    aes(fill = NULL),\n    outlier.alpha = 0.8,\n    outlier.size = 0.3,\n    show.legend = FALSE\n  ) +\n  # Renders without outliers to override the colored borders from previous box plot\n  # Staples are rendered so it is clearer where the outliers start\n  geom_boxplot(\n    alpha = 0.8,\n    staplewidth = 0.2,\n    outliers = FALSE,\n    color = \"black\"\n  ) +\n  \n  # 2023 Median reference line\n  geom_hline(yintercept = median2023,\n             color = \"darkgoldenrod4\",\n             linetype = \"dashed\") +\n  annotate(\n    \"richtext\",\n    label = paste0(\"2023Q1 Median<br/>**$\", round(median2023 / 1e6, 2), \"M**\"),\n    y = median2023 * 0.65,\n    x = 6.9,\n    color = \"darkgoldenrod4\",\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # 2024 Median reference line\n  geom_hline(yintercept = median2024,\n             color = \"brown\",\n             linetype = \"dashed\") +\n  annotate(\n    \"richtext\",\n    label = paste0(\"2024Q1 Median<br/>**$\", round(median2024 / 1e6, 2), \"M**\"),\n    y = median2024 * 1.55,\n    x = 6.9,\n    color = \"brown\",\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # Set colors\n  scale_fill_manual(values = c(\"grey60\", \"blue\")) +\n  scale_color_manual(values = c(\"grey60\", \"blue\")) +\n  \n  # Format axes\n  scale_y_log10(limits = c(0.5e6, 100e6),\n                labels = number_format(scale = 1e-6, suffix = \"M\"),\n                n.breaks = 9) +\n  # Add more space to the right side for the reference line annotations and legend\n  scale_x_discrete(labels = wrap_format(10), expand = expansion(add = c(0.6, 1.4))) +\n  labs(x = \"Property Type\",\n       y = \"Transacted Price ($)\",\n       fill = \"Quarter\") +\n  \n  # Plot styles\n  theme_minimal() +\n  plot_annotation(title = \"Transaction Prices by Property Type for 2023Q1 & 2024Q1\",\n                  subtitle = \"Overall prices have increased by **3.7%** from $1.63M to $1.69M. However, the price variability for all property types<br/>have decreased, with fewer outliers present.\") &\n  theme(\n    text = element_text(family = \"Roboto Condensed\"),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_markdown(color = \"grey50\", size = rel(0.9)),\n    axis.line.x = element_line(),\n    axis.title.x = element_blank(),\n    axis.text.x = element_text(size = rel(1.2)),\n    axis.line.y = element_line(),\n    axis.ticks.y = element_line(),\n    # Render legend inside the plot\n    legend.position = \"inside\",\n    legend.position.inside = c(1, 0.85),\n    legend.justification = \"right\",\n    legend.location = \"plot\",\n    legend.box.background = element_rect()\n  )\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n::: panel-tabset\n### Gains\n\nIn this iteration, we maximized the available space by expanding the right side of the x-axis further, which now holds the legend and annotations for the reference lines. Doing this also ensures that no important information get covered by the annotations.\n\nNext, the colors of the reference lines are changed to a different color than the fills with the labels added to the end of the line so readers won't be confused with the colors in our legend.\n\nLastly, we did tweaks on the y-axis to have smaller breaks to help readers gauge the log scale better. Aesthetically, this is worse as the axis labels do not look equidistant. However, this helps a lot in clarity.\n\n### Points for improvement\n\nIn our subtitle, we have this excerpt from the original write-up:\n\n> Overall prices have increased by **3.7%** from \\$1.63M to \\$1.69M. However, the price variability for all property types have decreased, with fewer outliers present.\n\nNow that we expanded the y-axis, we can see that this is not necessarily true. Hence, we must update this to prevent confusion.\n\nInstead, we can emphasize the point that Landed properties all sold above the market median.\n:::\n\n## 4.3 Final Iteration\n\nTo emphasize that Landed properties sell above the the median price, we will do the following:\n\n-   Rearrange x-axis to put landed property types on 1 side of the plot\n\n-   Add annotation that they sell above market median.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(realis,\n       aes(\n         y = TRANSACTED_PRICE,\n         x = factor(PROPERTY_TYPE, levels = c(\"Detached House\", \"Semi-Detached House\", \"Terrace House\", \"Condominium\", \"Apartment\", \"Executive Condominium\")),\n         fill = QUARTER,\n         color = QUARTER\n       )) +\n  \n  # Annotate that all landed properties sold above market median\n  annotate(\"rect\", xmin = 0.5, xmax = 3.5, ymin = 0.5e6, ymax = 100e6,\n           alpha = 0.1,fill = \"blue\") +\n  annotate(\n    \"richtext\",\n    label = \"Landed properties sold for<br/>above market median<br/>prices in 2024Q1.\",\n    y = 55e6,\n    x = 2.6,\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # Renders colored outliers and box border\n  geom_boxplot(\n    aes(fill = NULL),\n    outlier.alpha = 0.8,\n    outlier.size = 0.3,\n    show.legend = FALSE\n  ) +\n  # Renders without outliers to override the colored borders from previous box plot\n  # Staples are rendered so it is clearer where the outliers start\n  geom_boxplot(\n    alpha = 0.8,\n    staplewidth = 0.2,\n    outliers = FALSE,\n    color = \"black\"\n  ) +\n  \n  # 2023 Median reference line\n  geom_hline(yintercept = median2023,\n             color = \"darkgoldenrod4\",\n             linetype = \"dashed\") +\n  annotate(\n    \"richtext\",\n    label = paste0(\"2023Q1 Median<br/>**$\", round(median2023 / 1e6, 2), \"M**\"),\n    y = median2023 * 0.65,\n    x = 6.9,\n    color = \"darkgoldenrod4\",\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # 2024 Median reference line\n  geom_hline(yintercept = median2024,\n             color = \"brown\",\n             linetype = \"dashed\") +\n  annotate(\n    \"richtext\",\n    label = paste0(\"2024Q1 Median<br/>**$\", round(median2024 / 1e6, 2), \"M**\"),\n    y = median2024 * 1.55,\n    x = 6.9,\n    color = \"brown\",\n    size = 3,\n    family = \"Roboto Condensed\"\n  ) +\n  \n  # Set colors\n  scale_fill_manual(values = c(\"grey60\", \"blue\")) +\n  scale_color_manual(values = c(\"grey60\", \"blue\")) +\n  \n  # Format axes\n  scale_y_log10(limits = c(0.5e6, 100e6),\n                labels = number_format(scale = 1e-6, suffix = \"M\"),\n                n.breaks = 9) +\n  # Add more space to the right side for the reference line annotations and legend\n  scale_x_discrete(labels = wrap_format(10), expand = expansion(add = c(0.6, 1.4))) +\n  labs(x = \"Property Type\",\n       y = \"Transacted Price ($)\",\n       fill = \"Quarter\") +\n  \n  # Plot styles\n  theme_minimal() +\n  plot_annotation(title = \"Transaction Prices by Property Type for 2023Q1 & 2024Q1\",\n                  subtitle = \"Overall prices have increased by <span style='color:darkgreen;'>**3.7%**</span> from **$1.63M** to **1.69M**. **Detached Houses** remain the most expensive property type,<br/>while **Executive Condominiums** are still the cheapest.\") &\n  theme(\n    text = element_text(family = \"Roboto Condensed\"),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_markdown(color = \"grey50\", size = rel(0.9)),\n    axis.line.x = element_line(),\n    axis.title.x = element_blank(),\n    axis.text.x = element_text(size = rel(1.2)),\n    axis.line.y = element_line(),\n    axis.ticks.y = element_line(),\n    # Render legend inside the plot\n    legend.position = \"inside\",\n    legend.position.inside = c(1, 0.85),\n    legend.justification = \"right\",\n    legend.location = \"plot\",\n    legend.box.background = element_rect()\n  )\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n# 5 Summary\n\n# 6 References\n\n<https://isss608-ay2023-24apr.netlify.app/lesson/lesson02/lesson02-designing%20graphs%20to%20enlighten#/title-slide>\n\n[Exercise](Take-home_Exs/Ex1/Take-home_Ex1)\n\n<https://www.propertygiant.com/blog/everything-you-need-to-know-about-strata-landed-houses-and-the-available-strata-landed-projects-in-singapore>\n",
    "supporting": [
      "Take-home_Ex2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.30/datatables.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}